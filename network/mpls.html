<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Blog de Tecnolog√≠a</title>
    <link rel="icon" href="../media/imagen41.png" type="image/png">
    <script src="https://kit.fontawesome.com/9474e300a6.js" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="../css/estilos-articulo.css">
</head>
<body>

    <header>
        <div class="container__header">
            <div class="logo">
                <img src="../media/logo-1.png" alt="">
            </div>

            <div class="menu">
                <nav>
                    <ul>
                        <li><a href="../index.html">Inicio</a></li>
                        <li><a href="../electronica.html">Electr√≥nica</a></li>
                        <li><a href="../network.html">Networking</a></li>
                        <li><a href="../ia.html">Inteligencia Artificial</a></li>
                        <li><a href="../hacking.html">Ciberseguridad</a></li>
                        <li><a href="../devops.html">DevOps</a></li>
                    </ul>
                </nav>
            </div>
            <i class="fa-solid fa-bars" style="color: #ffffff;" id="icon_menu"></i>
            <div class="header__botonMenu">
                <input type="button" class="btn__header-botonMenu" value="Aportar" onclick="window.open('https://buymeacoffee.com/ryuzak1', '_blank');">
            </div>
        </div>
    </header>
    <main>
        <div class="cover">
            <div class="text__articulo-cover">
                <br>
                <br>
                <h1>Multiprotocol Label Switching (MPLS)</h1>
                <p>MPLS es una tecnolog√≠a de conmutaci√≥n de paquetes desarrollada a finales de los a√±os 90 con el prop√≥sito de mejorar la eficiencia y velocidad del enrutamiento en redes IP. Su creaci√≥n respondi√≥ a la necesidad de reducir la latencia en el reenv√≠o de paquetes y optimizar la calidad del servicio (QoS) en redes con alto tr√°fico. MPLS permite el transporte eficiente de diversos tipos de tr√°fico, incluyendo datos, voz y video, a trav√©s de una infraestructura de red unificada.</p>
                <p>Su flexibilidad permite la conmutaci√≥n eficiente de datos IP tradicionales (IPv4/IPv6), la optimizaci√≥n de rutas y la reducci√≥n de latencia para Voz sobre IP (VoIP), la transmisi√≥n de video en tiempo real sin interrupciones y el soporte de Redes Privadas Virtuales (VPNs) de capa 2 y capa 3, garantizando seguridad y aislamiento del tr√°fico.</p>
                <h2>Caracter√≠sticas T√©cnicas</h2>
                <p>MPLS opera en una capa intermedia, conocida como Capa 2.5, ubicada entre la Capa 2 (Enlace de Datos) y la Capa 3 (Red) del modelo OSI, lo que le otorga una flexibilidad √∫nica. Esta posici√≥n intermedia le permite combinar las ventajas de ambas capas, ofreciendo un enrutamiento eficiente y una alta calidad de servicio. Sus principales caracter√≠sticas incluyen:</p>
                <ul style="list-style-type: none;">
                    <li>‚àò <marcador class="resaltado8">Etiquetado de paquetes: </marcador>MPLS asigna una etiqueta a cada paquete de datos, lo que permite un reenv√≠o eficiente sin necesidad de analizar direcciones IP.</li>
                    <li>‚àò <marcador class="resaltado8">R√°pida conmutaci√≥n: </marcador>El uso de etiquetas permite a los routers tomar decisiones de reenv√≠o basadas en tablas de conmutaci√≥n preconfiguradas, reduciendo el tiempo de procesamiento.</li>
                    <li>‚àò <marcador class="resaltado8">Calidad de Servicio (QoS): </marcador>Facilita la priorizaci√≥n del tr√°fico para aplicaciones cr√≠ticas como VoIP y transmisi√≥n de video.</li>
                    <li>‚àò <marcador class="resaltado8">Soporte de m√∫ltiples protocolos: </marcador>Puede transportar tr√°fico IPv4, IPv6, ATM, Frame Relay y Ethernet, de ah√≠ su nombre "Multiprotocol".</li>
                    <li>‚àò <marcador class="resaltado8">Ingenier√≠a de tr√°fico: </marcador>Permite la creaci√≥n de rutas optimizadas y predefinidas, evitando congesti√≥n en la red.</li>
                </ul>
                <div class="blog-image-grande">
                    <img src="media/mpls.png" alt="">
                </div>
                <h2>Funcionamiento</h2>
                <p>MPLS introduce un m√©todo de reenv√≠o basado en etiquetas que reemplaza las tradicionales b√∫squedas en la tabla de enrutamiento IP. Su operaci√≥n se basa en los siguientes procesos:</p>
                <ol>
                    <li><marcador class="resaltado8">Asignaci√≥n de etiquetas: </marcador>El router de entrada (Label Edge Router, LER) examina el paquete IP entrante y le asigna una etiqueta basada en la ruta de destino.</li>
                    <li><marcador class="resaltado8">Reenv√≠o basado en etiquetas: </marcador>Una vez etiquetado, el paquete es transportado a trav√©s de la red MPLS por una serie de routers intermedios (Label Switch Routers, LSR), que utilizan la etiqueta para determinar la ruta sin examinar la direcci√≥n IP.</li>
                    <li><marcador class="resaltado8">Eliminaci√≥n de la etiqueta: </marcador>En el router de salida, la etiqueta MPLS es eliminada y el paquete se entrega al destino final utilizando enrutamiento IP est√°ndar.</li>
                </ol>
                <br>
                <p>El uso de etiquetas en MPLS es mejor que el enrutamiento basado en direcciones IP porque reduce la carga de procesamiento en los routers y acelera la transmisi√≥n de datos. En el enrutamiento IP tradicional, cada router debe analizar la direcci√≥n de destino y buscar la mejor ruta en su tabla de enrutamiento, lo que consume tiempo y recursos. En cambio, MPLS asigna etiquetas a los paquetes desde el inicio y los routers solo deben leer la etiqueta para reenviarlos, lo que hace el proceso mucho m√°s r√°pido.</p>
                <p>Adem√°s, MPLS es m√°s escalable, ya que las redes IP grandes requieren tablas de enrutamiento enormes, mientras que en MPLS los routers intermedios solo manejan etiquetas, reduciendo el uso de memoria y procesamiento. Esto es ideal para proveedores de servicios que manejan m√∫ltiples clientes sin sobrecargar sus equipos.</p>
                <p>Otro beneficio clave es la capacidad de aplicar Calidad de Servicio (QoS) y optimizar el tr√°fico. Con etiquetas, se pueden priorizar ciertos tipos de datos, como voz o video, garantizando una mejor experiencia sin interrupciones. En IP tradicional, todos los paquetes compiten por el mismo ancho de banda, lo que puede generar latencias y congesti√≥n.</p>
                <p>MPLS tambi√©n facilita la ingenier√≠a de tr√°fico al permitir que ciertos flujos de datos tomen rutas espec√≠ficas seg√∫n la disponibilidad de ancho de banda, algo que el enrutamiento IP no hace de manera eficiente. Esto permite evitar congesti√≥n en la red y optimizar el uso de los enlaces disponibles.</p>
                <p>Finalmente, MPLS es la base de muchas soluciones de VPN empresariales, ya que permite separar el tr√°fico de diferentes clientes sin necesidad de configurar t√∫neles adicionales. Esto simplifica la administraci√≥n y mejora la seguridad.</p>
                <div class="blog-image-grande">
                    <img src="media/mpls2.jpg" alt="">
                </div>
                <h2>Componentes</h2>
                <p>Para entender a fondo el funcionamiento de MPLS, es crucial conocer los elementos que intervienen en su arquitectura:</p>
                <ul style="list-style-type: none;">
                    <li>ñ¶π <marcador class="resaltado9">Label Edge Routers (LERs): </marcador>Routers ubicados en los bordes de la red MPLS. Son responsables de asignar y eliminar etiquetas en los paquetes. Se dividen en:</li>
                    <li>‚àò <marcador class="resaltado8">Provider Edge (PE): </marcador>Routers en el l√≠mite de la red del proveedor. Son responsables de la asignaci√≥n y eliminaci√≥n de etiquetas en los paquetes que entran o salen de la red MPLS. Tambi√©n manejan la conectividad con los Customer Edge (CE).</li>
                    <li>‚àò <marcador class="resaltado8">Customer Edge (CE): </marcador>Routers ubicados en la red del cliente y conectados a los PE. Aunque no forman parte de la red MPLS, env√≠an tr√°fico a los PE sin conocimiento del etiquetado MPLS.</li>
                    <li>ñ¶π <marcador class="resaltado9">Label Switch Routers (LSRs): </marcador>Routers dentro de la red MPLS que leen y conmutan paquetes bas√°ndose en las etiquetas asignadas. Aqu√≠ es donde entra el siguiente tipo de router:</li>
                    <li>‚àò <marcador class="resaltado8">Provider (P) Routers: </marcador>Son routers dentro del n√∫cleo de la red MPLS. Se encargan √∫nicamente de la conmutaci√≥n de paquetes bas√°ndose en etiquetas, sin interactuar directamente con los clientes. No tienen conocimiento de las redes externas y solo manejan tr√°fico etiquetado entre routers PE.</li>
                    <li>ñ¶π <marcador class="resaltado9">Forwarding Equivalence Class (FEC): </marcador>Conjunto de paquetes que son tratados de la misma manera y asignados a la misma etiqueta, facilitando una conmutaci√≥n eficiente.</li>
                    <p>Al agrupar los paquetes en la misma FEC, se pueden implementar varias optimizaciones y caracter√≠sticas avanzadas, tales como:</p>
                    <li>‚àò <marcador class="resaltado8">Calidad de Servicio (QoS): </marcador>Permite priorizar ciertos tipos de tr√°fico, como VoIP o video en tiempo real, asegurando un menor retardo y mayor estabilidad en la comunicaci√≥n.</li>
                    <li>‚àò <marcador class="resaltado8">Traffic Engineering (TE): </marcador>MPLS permite definir rutas espec√≠ficas para optimizar el uso del ancho de banda y evitar congestiones en la red.</li>
                    <li>‚àò <marcador class="resaltado8">Redundancia y recuperaci√≥n r√°pida: </marcador>Con el uso de Fast Reroute (FRR), MPLS puede establecer rutas de respaldo para minimizar el impacto de fallos en los enlaces.</li>
                    <li>‚àò <marcador class="resaltado8">Seguridad: </marcador>Al separar flujos de tr√°fico en diferentes etiquetas, se pueden aislar redes virtuales y mejorar la seguridad mediante MPLS VPNs.</li>
                    <li>‚àò <marcador class="resaltado8">Balanceo de carga: </marcador>MPLS permite distribuir tr√°fico de manera uniforme entre varios enlaces, optimizando el rendimiento de la red.</li>
                    <li>ñ¶π <marcador class="resaltado9">Label Switched Path (LSP): </marcador>Ruta predefinida a trav√©s de la red MPLS que sigue un paquete basado en las etiquetas asignadas. Se establece entre un LER de entrada y un LER de salida, pasando por varios LSRs dentro de la red. Es fundamental para optimizar la entrega del tr√°fico y soportar aplicaciones como VPNs y QoS.</li>
                    <p>El LSP en MPLS es unidireccional, por lo que para comunicaci√≥n en ambos sentidos se requieren dos LSPs separados, uno para cada direcci√≥n. Esto permite optimizar cada ruta seg√∫n la red, y en algunos casos, se usan protocolos como RSVP-TE para mejorar la gesti√≥n del tr√°fico y la calidad del servicio.</p>
                    <li>ñ¶π <marcador class="resaltado9">Label Distribution Protocol (LDP): </marcador>Protocolo utilizado para la distribuci√≥n de etiquetas entre routers MPLS.</li>
                </ul>
                <div class="blog-image-zoom">
                    <img src="media/mpls3.png" alt="">
                </div>
                <h2>Formato de las Etiquetas</h2>
                <p>Cada paquete MPLS contiene una etiqueta que incluye los siguientes campos:</p>
                <ul style="list-style-type: none;">
                    <li>‚ãÜ <marcador class="resaltado5">Label (20 bits): </marcador>Identificador √∫nico asignado al paquete.</li>
                    <li>‚ãÜ <marcador class="resaltado5">Exp (3 bits): </marcador>Usado para priorizaci√≥n de tr√°fico (QoS).</li>
                    <li>‚ãÜ <marcador class="resaltado5">S (1 bit): </marcador>Indica si es la √∫ltima etiqueta en la pila de etiquetas MPLS. Si su valor es 1, significa que es la √∫ltima etiqueta; si es 0, hay m√°s etiquetas en la pila.</li>
                    <li>‚ãÜ <marcador class="resaltado5">TTL (8 bits): </marcador>Controla la vida √∫til del paquete para evitar bucles.</li>
                </ul>
                <br>
                <p>El tama√±o de la MTU en redes MPLS es 1500 bytes en la capa 3, que es el tama√±o est√°ndar de un paquete Ethernet sin encapsulaci√≥n adicional. Sin embargo, cuando MPLS se aplica, cada paquete lleva una etiqueta de 4 bytes de tama√±o, lo que aumenta el tama√±o total del paquete. Para que los paquetes MPLS se transmitan correctamente sin que se fragmenten, se debe configurar una MTU m√°s grande para las interfaces de los routers y dispositivos MPLS. Esto se debe a que los 4 bytes de cada etiqueta MPLS se suman al tama√±o del paquete original.</p>
                <p>Si hay switches intermedios entre routers MPLS, especialmente en una red de alto rendimiento, es recomendable activar Jumbo Frames. Los Jumbo Frames son paquetes Ethernet de m√°s de 1500 bytes, que pueden ser configurados para permitir una MTU mayor (por ejemplo, 9000 bytes o m√°s). Esto permite que los paquetes MPLS sean m√°s grandes y, por lo tanto, no se vean afectados por la limitaci√≥n de MTU de 1500 bytes en redes Ethernet tradicionales.</p>
                <p>Activar Jumbo Frames es importante cuando hay switches intermedios que tambi√©n necesitan manejar estos paquetes m√°s grandes. Si no se activan los Jumbo Frames, los paquetes MPLS que excedan la MTU de 1500 bytes podr√≠an fragmentarse, lo que afectar√≠a la eficiencia de la transmisi√≥n y podr√≠a generar problemas de rendimiento o errores en la red.</p>
                <p>Es com√∫n y recomendable configurar la MTU a un valor mayor para optimizar el rendimiento y evitar problemas de fragmentaci√≥n, especialmente cuando se utilizan Jumbo Frames. Configurar una MTU de 9216 bytes es una pr√°ctica recomendada, ya que asegura que los paquetes MPLS, incluidos los encabezados de etiquetas, puedan circular sin problemas a trav√©s de la red.</p>
                <div class="blog-image-grande">
                    <img src="media/mpls4.gif" alt="">
                </div>
                <h2>Manipulaci√≥n de las Etiquetas</h2>
                <p>El funcionamiento de MPLS se basa en la manipulaci√≥n de etiquetas a lo largo de la red. Los principales procesos son:</p>
                <ul style="list-style-type: none;">
                    <li>‚ãÜ <marcador class="resaltado5">Push: </marcador>Un LER asigna y coloca una etiqueta en un paquete IP entrante.</li>
                    <li>‚ãÜ <marcador class="resaltado5">Swap: </marcador>Un LSR reemplaza una etiqueta con otra nueva para reenviar el paquete al siguiente nodo.</li>
                    <li>‚ãÜ <marcador class="resaltado5">Pop: </marcador>Un LER de salida elimina la etiqueta antes de entregar el paquete al destino final.</li>
                    <li>‚ãÜ <marcador class="resaltado5">PHP (Penultimate Hop Popping): </marcador>En este proceso, el LSR justo antes del LER de salida elimina la etiqueta del paquete en lugar de que lo haga el LER de salida. Esto ayuda a reducir la carga de trabajo en el LER final y mejora la eficiencia en el enrutamiento.</li>
                    <li>‚ãÜ <marcador class="resaltado5">Untagged: </marcador>Este proceso ocurre en el √∫ltimo LER, donde el paquete es "desetiquetado", es decir, la etiqueta MPLS es eliminada, y el paquete vuelve a ser un paquete IP est√°ndar que puede ser dirigido de acuerdo con la direcci√≥n IP de destino, sin ninguna etiqueta MPLS.</li>
                    <li>‚ãÜ <marcador class="resaltado5">Aggregate: </marcador>Implica la combinaci√≥n de varias rutas o flujos de tr√°fico que comparten la misma etiqueta, optimizando el uso de recursos al tratar m√∫ltiples flujos como uno solo en la red.</li>
                </ul>
                <div class="blog-image-grande">
                    <img src="media/mpls5.gif" alt="">
                </div>
                <h2>Base de Datos de Etiquetas</h2>
                <p>El enrutamiento en MPLS se basa en bases de datos especializadas que gestionan la asignaci√≥n y reenv√≠o de etiquetas:</p>
                <ul style="list-style-type: none;">
                    <li>ñ¶π <marcador class="resaltado9">Label Information Base (LIB): </marcador>Es la base de datos donde se almacenan las etiquetas asignadas y sus correspondencias con los prefijos de red. Cada router MPLS mantiene su propia LIB.</li>
                    <li>ñ¶π <marcador class="resaltado9">Label Forwarding Information Base (LFIB): </marcador>Se utiliza para el reenv√≠o de paquetes, indicando c√≥mo deben ser procesadas y enviadas las etiquetas en funci√≥n de la LIB.</li>
                    <li>ñ¶π <marcador class="resaltado9">Forwarding Information Base (FIB): </marcador>Similar a una tabla de enrutamiento, pero optimizada para reenv√≠o r√°pido en MPLS.</li>
                </ul>
                <p>Cuando un paquete entra en la red MPLS, el router de borde consulta la LIB para determinar la etiqueta correspondiente y la almacena en la LFIB para su reenv√≠o eficiente. A medida que el paquete avanza por la red, cada LSR consulta su LFIB para intercambiar etiquetas sin necesidad de procesar direcciones IP.</p>
                <div class="blog-image-doble-grande">
                    <img src="media/mpls6.png" alt="">
                    <img src="media/mpls7.png" alt="">
                </div>
                <h2>Manejo del Plano de Control, Mantenimiento y Datos</h2>
                <p>En los routers Cisco, la arquitectura de red se divide en tres planos funcionales principales, cada uno con responsabilidades espec√≠ficas para garantizar el correcto funcionamiento del dispositivo:</p>
                <h6>Plano de Control</h6>
                <p>Es el "cerebro" del router, responsable de tomar decisiones de routing y gestionar la inteligencia de la red.</p>
                <ul style="list-style-type: none;">
                    <li>„Ä§ <marcador class="resaltado6">Funciones clave:</marcador></li>
                    <ul style="list-style-type: none;">
                        <li>‚àò Ejecuta protocolos de routing (OSPF, BGP, EIGRP) para construir tablas de enrutamiento (Routing Information Base, RIB).</li>
                        <li>‚àò Genera la FIB (Forwarding Information Base) y la tabla de adyacencias para CEF.</li>
                        <li>‚àò Maneja se√±ales de control (ej. mensajes ICMP, TCP SYN, actualizaciones de protocolos).</li>
                    </ul>
                    <li>„Ä§ <marcador class="resaltado6">Componentes:</marcador></li>
                    <ul style="list-style-type: none;">
                        <li>‚àò Procesador principal (CPU del router).</li>
                        <li>‚àò Software del sistema operativo (IOS/IOS-XE).</li>
                    </ul>
                    <li>„Ä§ <marcador class="resaltado6">Ejemplo:</marcador></li>
                    <ul style="list-style-type: none;">
                        <p>Cuando se recibe una actualizaci√≥n de ruta BGP, el plano de control procesa la informaci√≥n y actualiza la RIB.</p>
                    </ul>
                </ul>
                <h6>Plano de Datos (Forwarding Plane)</h6>
                <ul style="list-style-type: none;">
                    <li>„Ä§ <marcador class="resaltado6">Funciones clave:</marcador></li>
                    <ul style="list-style-type: none;">
                        <li>‚àò Reenv√≠a paquetes bas√°ndose en la FIB (para CEF) o mediante process switching (si CEF est√° desactivado).</li>
                        <li>‚àò Realiza operaciones como NAT, QoS, ACLs y encapsulamientos.</li>
                    </ul>
                    <li>„Ä§ <marcador class="resaltado6">Componentes:</marcador></li>
                    <ul style="list-style-type: none;">
                        <li>‚àò ASICs (Circuitos Integrados de Aplicaci√≥n Espec√≠fica) en routers de alto rendimiento (ej. Cisco ASR, Nexus).</li>
                        <li>‚àò <marcador class="resaltado8">CEF (Cisco Express Forwarding): </marcador>Acelera el reenv√≠o al evitar consultas a la CPU por cada paquete.</li>
                    </ul>
                    <li>„Ä§ <marcador class="resaltado6">Ejemplo:</marcador></li>
                    <p>Un paquete entrante se reenv√≠a a su destino usando la FIB en hardware, sin involucrar al plano de control.</p>
                </ul>
                <h6>Plano de Mantenimiento (Management Plane)</h6>
                <ul style="list-style-type: none;">
                    <li>„Ä§ <marcador class="resaltado6">Funciones clave:</marcador></li>
                    <ul style="list-style-type: none;">
                        <li>‚àò Procesa acceso SSH, Telnet, HTTP/HTTPS (interfaz de gesti√≥n).</li>
                        <li>‚àò Recopila logs, SNMP traps y telemetr√≠a.</li>
                        <li>‚àò Permite actualizaciones de firmware y configuraciones.</li>
                    </ul>
                    <li>„Ä§ <marcador class="resaltado6">Componentes:</marcador></li>
                    <ul style="list-style-type: none;">
                        <li>‚àò Interfaces de gesti√≥n (puerto MGMT, consola AUX).</li>
                        <li>‚àò Servicios como syslog, NetFlow y APIs (RESTCONF).</li>
                    </ul>
                    <li>„Ä§ <marcador class="resaltado6">Ejemplo:</marcador></li>
                    <p>Un administrador accede v√≠a SSH para configurar una ACL.</p>
                </ul>
                <p>En la arquitectura de red, la interacci√≥n entre los planos de control y de datos se caracteriza por una separaci√≥n l√≥gica clara, dise√±ada para evitar que fallos en uno afecten al otro; por ejemplo, un ataque DDoS a la CPU, que reside en el plano de control, no deber√≠a interrumpir el reenv√≠o de tr√°fico en el plano de datos si CEF est√° activo. Sin embargo, existen excepciones, como los paquetes destinados al router mismo (por ejemplo, pings a su interfaz) que son manejados por el plano de control, o los paquetes con opciones IP complejas que pueden requerir un procesamiento m√°s detallado, involucrando a la CPU y, por ende, al plano de control.</p>
                <div class="blog-image-grande">
                    <img src="media/mpls8.png" alt="">
                </div>
                <h2>Cisco Express Forwarding (CEF) y Fast Switching</h2>
                <p>El reenv√≠o de paquetes en MPLS depende en gran medida de m√©todos eficientes de procesamiento en los routers. Cisco ofrece dos tecnolog√≠as clave para optimizar este proceso: Fast Switching y Cisco Express Forwarding (CEF).</p>
                <h6>Fast Switching</h6>
                <p>Fast Switching es una t√©cnica de almacenamiento en cach√© que acelera la conmutaci√≥n de paquetes en routers Cisco. Funciona al almacenar la primera consulta en la tabla de enrutamiento y crear una entrada en cach√© para paquetes similares, lo que reduce el tiempo de procesamiento en env√≠os posteriores.</p>
                <p>Para activar Fast Switching en un router Cisco:</p>
                <div class="consola">
                    
                    <div class="barra-superior-consola">
                        <div class="grupo-icono-texto">
                            <img src="../media/cmd.png" alt="Icono" class="icono-cmd">
                            <span class="texto-cmd">C:\Windows\system32\cmd.exe</span>
                        </div>
                        <button class="boton-copiar-consola"><i class="fas fa-copy"></i>&nbsp;Copy</button>
                    </div>
                    <div class="codigo-consola">
                        <!-- Contenido del c√≥digo -->
<pre><code>router(config)# interface GigabitEthernet0/1
router(config-if)# ip route-cache</code></pre>
                    </div>
                </div>
                <p>Este comando habilita Fast Switching en la interfaz especificada, permitiendo un reenv√≠o m√°s eficiente de paquetes.</p>
                <p>Para verificar "fast switching", puedes intentar verificar su estado y cach√© utilizando el comando <marcador class="subrayado">show ip cache verbose</marcador>.</p>
                <h6>Cisco Express Forwarding (CEF)</h6>
                <p>El procesamiento de paquetes en MPLS depende de la eficiencia con la que los routers pueden reenviar tr√°fico. Aqu√≠ es donde Cisco Express Forwarding (CEF) juega un papel crucial al optimizar la Forwarding Information Base (FIB).</p>
                <p>La FIB almacena rutas precomputadas para un reenv√≠o m√°s r√°pido de paquetes en el plano de datos, eliminando la necesidad de consultas recurrentes en la tabla de enrutamiento. Sin embargo, la actualizaci√≥n y mantenimiento de la FIB dependen del plano de control, lo que implica procesamiento adicional en la CPU.</p>
                <p>CEF mejora la FIB al optimizar su construcci√≥n y mantenimiento mediante el uso de un motor de reenv√≠o especializado. Este proceso divide el trabajo en dos componentes clave:</p>
                <ol>
                    <li><marcador class="resaltado8">FIB (Forwarding Information Base): </marcador>Contiene las rutas optimizadas para reenviar paquetes sin necesidad de consultar la tabla de enrutamiento.</li>
                    <li><marcador class="resaltado8">Adjacency Table: </marcador>Mantiene informaci√≥n sobre los enlaces vecinos y direcciones MAC para reducir la carga en la CPU.</li>
                </ol>
                <p>Con CEF activado, los paquetes pueden ser reenviados directamente desde la FIB sin necesidad de intervenci√≥n del plano de control, lo que minimiza el uso de la CPU y acelera la conmutaci√≥n.</p>
                <p>Para activarlo en una interfaz espec√≠fica:</p>
                <div class="consola">
                    
                    <div class="barra-superior-consola">
                        <div class="grupo-icono-texto">
                            <img src="../media/cmd.png" alt="Icono" class="icono-cmd">
                            <span class="texto-cmd">C:\Windows\system32\cmd.exe</span>
                        </div>
                        <button class="boton-copiar-consola"><i class="fas fa-copy"></i>&nbsp;Copy</button>
                    </div>
                    <div class="codigo-consola">
                        <!-- Contenido del c√≥digo -->
<pre><code>router(config)# interface GigabitEthernet0/1
router(config-if)# ip cef</code></pre>
                    </div>
                </div>
                <p>Para verificar CEF en un entorno MPLS, puedes utilizar el comando <marcador class="subrayado">show ip cef summary</marcador> en dispositivos Cisco. Este comando proporciona un resumen del estado de CEF, indicando si est√° habilitado y funcionando correctamente.</p>
                <p>En el contexto de MPLS, el "fast switching" tradicional ha sido en gran medida reemplazado por CEF, que proporciona un reenv√≠o de paquetes m√°s eficiente y escalable; por lo tanto, la verificaci√≥n se centra en asegurar que CEF est√© habilitado y funcionando correctamente mediante comandos como <marcador class="subrayado">show ip cef</marcador>, <marcador class="subrayado">show mpls interfaces</marcador> y <marcador class="subrayado">show mpls ldp neighbor</marcador>.</p>
                <p>Para habilitar Distributed CEF (dCEF), que permite el procesamiento distribuido en hardware en tarjetas espec√≠ficas de un router modular (como las line cards de plataformas como Cisco 7600 o ASR9000), se utiliza el comando global de configuraci√≥n <marcador class="subrayado">ip cef distributed</marcador>. CEF es el m√©todo de reenv√≠o predeterminado en la mayor√≠a de los dispositivos Cisco modernos debido a su eficiencia y escalabilidad, ya que optimiza el rendimiento al utilizar tablas de reenv√≠o basadas en hardware (FIB y Adjacency Table) y evita la sobrecarga del plano de control. Al activar dCEF, el router distribuye las operaciones de reenv√≠o entre las tarjetas de interfaz, mejorando a√∫n m√°s el rendimiento en entornos de alto tr√°fico. Esta configuraci√≥n es esencial en routers modulares donde el procesamiento centralizado podr√≠a convertirse en un cuello de botella.</p>
                <div class="blog-image-grande">
                    <img src="media/mpls9.jpg" alt="">
                </div>
                <h2>LDP (Label Distribution Protocol)</h2>
                <p>LDP es un protocolo utilizado en redes MPLS para distribuir etiquetas entre los routers. Su funci√≥n principal es permitir que los routers se comuniquen y compartan informaci√≥n sobre las etiquetas que deben ser utilizadas para los paquetes en la red. Aqu√≠ est√°n los aspectos clave de LDP:</p>
                <ol style="list-style-type: none;">
                    <li>‚¶ø <marcador class="resaltado6">Puertos Utilizados: </marcador>LDP utiliza el puerto 646 para el establecimiento de conexiones entre los routers.</li>
                    <p>En LDP, el uso de UDP y TCP tiene un prop√≥sito distinto para cada tipo de comunicaci√≥n:</p>
                    <p>‚àò <marcador class="resaltado8">UDP: </marcador>En LDP, los mensajes "Hello" y otros mensajes de descubrimiento de vecinos, como los "Discovery" y "Advertisement" iniciales, se env√≠an utilizando UDP en el puerto 646. Estos mensajes sirven para que los routers se descubran entre s√≠ en una red MPLS y establezcan la comunicaci√≥n inicial.</p>
                    <p>‚àò <marcador class="resaltado8">TCP: </marcador>Una vez que los routers se han descubierto y han establecido una relaci√≥n LDP, las sesiones de distribuci√≥n de etiquetas (para intercambiar las etiquetas y otros par√°metros de enrutamiento) se realizan sobre TCP en el mismo puerto 646. TCP asegura la fiabilidad en la comunicaci√≥n entre routers durante la asignaci√≥n de etiquetas y el mantenimiento de las sesiones.</p>
                    <li>‚¶ø <marcador class="resaltado6">Direcci√≥n Multicast: </marcador>LDP utiliza la direcci√≥n 224.0.0.2 / FF01::2 para la comunicaci√≥n entre routers en una red.</li>
                    <p>Esta direcci√≥n es utilizada para enviar mensajes LDP a todos los routers en el √°rea que se encuentran escuchando.</p>
                    <li>‚¶ø <marcador class="resaltado6">Est√°ndar: </marcador>LDP es definido por el RFC 5036, que especifica el uso de LDP para la distribuci√≥n de etiquetas en redes MPLS.</li>
                    <li>‚¶ø <marcador class="resaltado6">Tipos de Mensaje LDP:</marcador></li>
                    <p>Los mensajes LDP se agrupan en diferentes tipos:</p>
                    <p>‚àò <marcador class="resaltado8">Hello: </marcador>Utilizado para descubrir otros routers LDP y establecer la comunicaci√≥n.</p>
                    <p>‚àò <marcador class="resaltado8">Initialization: </marcador>Esta es una fase importante para establecer la comunicaci√≥n entre los routers. Los mensajes de inicializaci√≥n (LDP Initialization) se env√≠an para asegurar que ambas partes se comuniquen de manera confiable y puedan negociar el intercambio de etiquetas.</p>
                    <p>‚àò <marcador class="resaltado8">Label Mapping: </marcador>Mensajes que asignan y distribuyen etiquetas para una FEC.</p>
                    <p>‚àò <marcador class="resaltado8">Label Request: </marcador>Solicita la asignaci√≥n de una etiqueta para una FEC espec√≠fica.</p>
                    <p>‚àò <marcador class="resaltado8">Label Release: </marcador>Mensaje para liberar una etiqueta que ya no es necesaria.</p>
                    <p>‚àò <marcador class="resaltado8">Label Withdraw: </marcador>Retira una etiqueta previamente asignada.</p>
                    <li>‚¶ø <marcador class="resaltado6">Tiempos:</marcador></li>
                    <p>‚àò <marcador class="resaltado8">Hello Time: </marcador>El tiempo en el que un router espera recibir un mensaje Hello de un vecino. El valor por defecto es 5 segundos.</p>
                    <p>‚àò <marcador class="resaltado8">Hold Time: </marcador>El tiempo durante el cual un router mantendr√° la sesi√≥n LDP activa si no recibe mensajes del vecino. El valor por defecto es 15 segundos.</p>
                </ol>
                <div class="blog-image">
                    <img src="media/mpls10.jpg" alt="">
                </div>
                <h2>Label Switched Path (LSP)</h2>
                <p>El LSP en MPLS se establece utilizando el Label Distribution Protocol (LDP) para distribuir las etiquetas entre routers. Sin embargo, LDP no selecciona los caminos de manera directa en funci√≥n de las m√©tricas, sino que utiliza la tabla de enrutamiento IP y las rutas ya configuradas en la red para determinar c√≥mo enrutar los paquetes.</p>
                <p>Aqu√≠ est√° el proceso de c√≥mo se seleccionan los caminos:</p>
                <ol style="list-style-type: none;">
                    <li><marcador class="resaltado8">Selecci√≥n de la ruta: </marcador>LDP no se encarga de calcular las rutas basadas en m√©tricas como lo hace un protocolo de enrutamiento (como OSPF o BGP). En lugar de eso, los routers que ejecutan LDP seleccionan las rutas de salida utilizando las rutas previamente calculadas por los protocolos de enrutamiento, bas√°ndose en las m√©tricas de enrutamiento (como distancia, costo, etc.). Esas rutas se almacenan en la tabla de enrutamiento.</li>
                    <li><marcador class="resaltado8">Creaci√≥n del LSP: </marcador>Una vez que un router determina qu√© ruta utilizar (seg√∫n la tabla de enrutamiento), LDP asigna etiquetas a esos caminos. Cada FEC (Forwarding Equivalence Class), que representa un grupo de paquetes tratados de la misma forma, tiene una etiqueta asociada, y estas etiquetas se distribuyen a trav√©s de LDP para los routers en la red.</li>
                    <li><marcador class="resaltado8">Distribuci√≥n de las etiquetas (Label Mapping): </marcador>Cuando un router encuentra una ruta de salida, utiliza LDP para comunicar a los routers vecinos las etiquetas correspondientes a los destinos de las rutas. Esto se hace mediante los mensajes Label Mapping. Los routers utilizan esta informaci√≥n para encaminar los paquetes en funci√≥n de las etiquetas, no de las direcciones IP.</li>
                    <li><marcador class="resaltado8">Selecci√≥n de rutas de LSP: </marcador>Los caminos LSPs se eligen en funci√≥n de las rutas IP disponibles y las tablas de enrutamiento de los routers. Si el protocolo de enrutamiento est√° utilizando una m√©trica de costo para seleccionar una ruta, esa misma ruta se usar√° para el LSP. Si el protocolo de enrutamiento cambia de ruta debido a un cambio de m√©trica, el LSP tambi√©n se ajustar√° para usar la nueva ruta.</li>
                    <li><marcador class="resaltado8">Reconfiguraci√≥n de LSP en caso de fallos: </marcador>Si ocurre un cambio en la red, como un fallo de enlace, el protocolo de enrutamiento recalcula las rutas, y los routers actualizan los LSPs para reflejar estos cambios, lo que asegura que los paquetes sigan la nueva ruta utilizando las nuevas etiquetas distribuidas por LDP.</li>
                </ol>
                <br>
                <p>En MPLS, Holdtime y Keepalive son mecanismos fundamentales para mantener la estabilidad de las sesiones entre routers: el Holdtime (180 segundos por defecto) define el tiempo m√°ximo que un router esperar√° sin recibir mensajes Keepalive antes de declarar ca√≠da la sesi√≥n, mientras que el Keepalive (60 segundos por defecto) es el intervalo regular entre estos mensajes de "vida" que los routers intercambian para verificar la conexi√≥n activa. Estos valores (relaci√≥n 3:1 entre Holdtime y Keepalive) equilibran la detecci√≥n de fallos con la eficiencia del protocolo, pudiendo ajustarse seg√∫n necesidades de la red mediante comandos espec√≠ficos.</p>
                <div class="blog-image-grande">
                    <img src="media/mpls11.jpg" alt="">
                </div>
                <h2>Etiquetas Reservadas</h2>
                <ol style="list-style-type: none;">
                    <li>‚¶ø <marcador class="resaltado6">Label 0 (Reservado para LSR): </marcador>Esta etiqueta est√° reservada para indicar que el paquete no est√° siendo manejado por la infraestructura MPLS. Se utiliza durante el proceso de "pop" de la etiqueta, cuando un paquete sale de la red MPLS y vuelve a ser tratado como un paquete IP est√°ndar.</li>
                    <p>Esta etiqueta se usa cuando el valor de EXP (la prioridad del paquete) est√° configurado de tal manera que se desactiva el PHP. En este caso, el √∫ltimo router en la ruta MPLS eliminar√° la etiqueta, en lugar de hacerlo el pen√∫ltimo router.</p>
                    <li>‚¶ø <marcador class="resaltado6">Label 16: </marcador>El valor de la etiqueta 16 se utiliza para referirse a la etiqueta de "√∫ltima etiqueta", indicando que no hay m√°s etiquetas en la pila.</li>
                    <li>‚¶ø <marcador class="resaltado6">Label 15: </marcador>Este valor de etiqueta se utiliza para el tr√°fico de "loopback" dentro de las redes MPLS.</li>
                    <li>‚¶ø <marcador class="resaltado6">Label 255: </marcador>Se utiliza para el "Default Label", que generalmente es asignado en escenarios donde no se puede asignar una etiqueta espec√≠fica a los paquetes.</li>
                    <li>‚¶ø <marcador class="resaltado6">Reserved Labels (Entre 1 y 15): </marcador>Los valores de etiquetas entre 1 y 15 est√°n reservados para prop√≥sitos especiales y no deben ser utilizadas para etiquetar paquetes de tr√°fico normal.</li>
                    <p>‚àò <marcador class="resaltado8">Etiqueta 1: </marcador>Se utiliza en MPLS para indicar que no se debe realizar el procesamiento habitual de etiquetas. En su lugar, se recurre al direccionamiento IP convencional. Esto implica que el paquete debe ser procesado por las rutas IP tradicionales en lugar de las rutas MPLS basadas en etiquetas.</p>
                    <p>‚àò <marcador class="resaltado8">Etiqueta 2: </marcador>Se utiliza en MPLS cuando se trabaja con paquetes IPv6. Tiene la misma funci√≥n que la Etiqueta 0, pero aplicada en el contexto de IPv6. Esta etiqueta impone una etiqueta MPLS a los paquetes IPv6 entrantes, permitiendo que se conmutan dentro de la red MPLS de acuerdo con la etiqueta asignada.</p>                    
                    <p>‚àò <marcador class="resaltado8">Etiqueta 3: </marcador>Se utiliza para el mecanismo de Penultimate Hop Popping (PHP). Este proceso permite que el pen√∫ltimo router en la ruta MPLS (justo antes de la salida) retire la etiqueta del paquete antes de llegar al √∫ltimo router. Esto optimiza el procesamiento del paquete en el √∫ltimo hop y reduce la carga en el router final, ya que este solo tendr√° que tratar el paquete como un paquete IP convencional.</p>
                    <p>‚àò <marcador class="resaltado8">Etiqueta 4-12 y 15: </marcador>No asignadas.</p>
                    <p>‚àò <marcador class="resaltado8">Etiqueta 13: </marcador>Se utiliza para se√±alar un canal asociado gen√©rico en una red MPLS, espec√≠ficamente para fines de se√±alizaci√≥n y administraci√≥n de la red. Es usada para la transmisi√≥n de informaci√≥n relacionada con el mantenimiento y la supervisi√≥n de la red.</p>   
                    <p>‚àò <marcador class="resaltado8">Etiqueta 14: </marcador>Se utiliza en MPLS para facilitar la operaci√≥n, administraci√≥n y mantenimiento de la red. Se asocia con funciones de monitoreo y diagn√≥stico, permitiendo a los operadores verificar el estado de la red y detectar problemas.</p>
                    <li>‚¶ø <marcador class="resaltado6">Rango de etiquetas v√°lidas: </marcador>16 a 1,048,575 (de 0x00010 a 0xFFFFF).</li>
                </ol>
                <div class="blog-image">
                    <img src="media/mpls12.png" alt="">
                </div>
                <p></p>
                <h2>Configuraci√≥n</h2>
                <p>La siguiente topolog√≠a muestra una red MPLS con varios enrutadores interconectados. Los enrutadores est√°n configurados con direcciones de loopback para identificaci√≥n y segmentaci√≥n de red virtual. La red utiliza protocolos de enrutamiento IBGP y BGP para el intercambio de informaci√≥n de enrutamiento y la distribuci√≥n de etiquetas MPLS, esenciales para el reenv√≠o eficiente del tr√°fico a trav√©s de la red MPLS.</p>
                <p>Se proceder√° a configurar algunos de los equipos de la topolog√≠a utilizando dos tipos de sistemas operativos de enrutadores: IOS XE y IOS XR, con el fin de demostrar la interoperabilidad y las capacidades de configuraci√≥n de MPLS en entornos heterog√©neos.</p>
                <div class="blog-image-grande">
                    <img src="media/mpls13.png" alt="">
                </div>
                <h5>Cisco</h5>
                <p>‚ùç Configuraci√≥n para IOS_PE2</p>
                <div class="consola">
                    
                    <div class="barra-superior-consola">
                        <div class="grupo-icono-texto">
                            <img src="../media/cmd.png" alt="Icono" class="icono-cmd">
                            <span class="texto-cmd">C:\Windows\system32\cmd.exe</span>
                        </div>
                        <button class="boton-copiar-consola"><i class="fas fa-copy"></i>&nbsp;Copy</button>
                    </div>
                    <div class="codigo-consola">
                        <!-- Contenido del c√≥digo -->
<pre><code>conf t

! Habilitar MPLS en el router
ip cef
mpls label protocol ldp
mpls ldp discovery hello interval 4
mpls ldp discovery hello holdtime 12
mpls ldp holdtime 90

! Usar la Loopback0 como ID de LDP
mpls ldp router-id Loopback0 force

! Definir el rango de etiquetas MPLS de 200 a 400
mpls label range 200 400

! Configurar interfaces para MPLS y LDP
interface GigabitEthernet0/0
    mtu 8986
    mpls ip
interface GigabitEthernet0/2
    mtu 8986
    mpls ip

! Configurar OSPF para la conectividad IGP
router ospf 1
    network 2.2.2.2 0.0.0.0 area 0
    network 10.10.21.0 0.0.0.3 area 0
    network 10.10.22.0 0.0.0.3 area 0

! Configurar BGP con Core1 y Core2
router bgp 65000
    neighbor 10.10.21.2 remote-as 65000
    neighbor 10.10.21.2 update-source Loopback0
    neighbor 10.10.21.2 next-hop-self
    neighbor 10.10.22.2 remote-as 65000
    neighbor 10.10.22.2 update-source Loopback0
    neighbor 10.10.22.2 next-hop-self
exit
exit</code></pre>
                    </div>
                </div>
                <p>En IOS XR, la implementaci√≥n de MPLS presenta diferencias clave respecto a IOS tradicional: no se requiere activar manualmente CEF (Cisco Express Forwarding) ya que el reenv√≠o se gestiona autom√°ticamente mediante la RIB/FIB integrada en la arquitectura del sistema, y tampoco es necesario configurar "mpls ip" en interfaces individuales, ya que basta con habilitar MPLS globalmente mediante el comando "mpls ldp" para que se active autom√°ticamente en todas las interfaces configuradas con protocolos IGP, simplificando significativamente la implementaci√≥n y mantenimiento de la red MPLS.</p>
                <p>‚ùç Configuraci√≥n para IOS-XR_PE4</p>
                <div class="consola">
                    <div class="barra-superior-consola">
                        <div class="grupo-icono-texto">
                            <img src="../media/cmd.png" alt="Icono" class="icono-cmd">
                            <span class="texto-cmd">C:\Windows\system32\cmd.exe</span>
                        </div>
                        <button class="boton-copiar-consola"><i class="fas fa-copy"></i>&nbsp;Copy</button>
                    </div>
                    <div class="codigo-consola">
                        <!-- Contenido del c√≥digo -->
                <pre><code>configure terminal

! Habilitar MPLS y LDP en el router
mpls ldp
    router-id 4.4.4.4
    discovery hello interval 4
    discovery hello holdtime 12
    session holdtime 90
    label range 16600 16900

! Configurar interfaces para MPLS y LDP
interface GigabitEthernet0/0/0/0
    mtu 9000

interface GigabitEthernet0/0/0/1
    mtu 9000

! Configurar OSPF para la conectividad IGP
router ospf 1
    area 0
        network 4.4.4.4/32
        network 10.10.41.0/30
        network 10.10.42.0/30

! Configurar BGP con Core1 y Core2
router bgp 65000
    neighbor 10.10.41.2
        remote-as 65000
        update-source Loopback0
        next-hop-self
    neighbor 10.10.42.2
        remote-as 65000
        update-source Loopback0
        next-hop-self
commit
end</code></pre>
                    </div>
                </div>
                <p>En redes MPLS, es cr√≠tico que ambas interfaces tengan configurada la misma MTU (Maximum Transmission Unit), ya que la discrepancia en este valor puede causar problemas de fragmentaci√≥n o descarte de paquetes debido al overhead adicional que introducen las etiquetas MPLS (4+ bytes por etiqueta). Este requisito de uniformidad en la MTU se extiende tambi√©n a protocolos como OSPF, el cual verifica expl√≠citamente que la MTU sea id√©ntica en ambos extremos de un enlace durante el establecimiento de adyacencias, si existe una diferencia, los routers no podr√°n formar una adyacencia completa.</p>
                <p>Si configuras la MTU en 9000 bytes en la interfaz de un XR, en realidad la capacidad √∫til (payload) de la MTU ser√° 9000 menos esos 14 bytes de sobrecarga. Esto puede resultar en que la MTU efectiva (usada para el payload de datos) sea 8986 bytes.</p>
                <p>‚ùç Configuraci√≥n para XR_Core2</p>
                <div class="consola">
                    <div class="barra-superior-consola">
                        <div class="grupo-icono-texto">
                            <img src="../media/cmd.png" alt="Icono" class="icono-cmd">
                            <span class="texto-cmd">C:\Windows\system32\cmd.exe</span>
                        </div>
                        <button class="boton-copiar-consola"><i class="fas fa-copy"></i>&nbsp;Copy</button>
                    </div>
                    <div class="codigo-consola">
                        <!-- Contenido del c√≥digo -->
                <pre><code>configure terminal

! Habilitar MPLS y LDP en el router
mpls ldp router-id 100.2.2.2
mpls ldp label range 16600 16900

! Configurar interfaces para MPLS y LDP
interface GigabitEthernet0/0/0/1
    mtu 9000

interface GigabitEthernet0/0/0/2
    mtu 9000

interface GigabitEthernet0/0/0/4
    mtu 9000

interface GigabitEthernet0/0/0/5
    mtu 9000

interface GigabitEthernet0/0/0/6
    mtu 9000

! Configurar OSPF para la conectividad IGP
router ospf 1
    mpls ldp auto-config
    area 0
        network 100.2.2.2/32
        network 10.10.1.0/30
        network 10.10.2.0/30
        network 10.10.22.0/30
        network 10.10.42.0/30
        network 10.10.52.0/30

! Configurar BGP en Core2
router bgp 65000
    neighbor 10.10.1.1
        remote-as 65000
        update-source Loopback0
        next-hop-self
    neighbor 10.10.2.1
        remote-as 65000
        update-source Loopback0
        next-hop-self
    neighbor 10.10.22.1
        remote-as 65000
        update-source Loopback0
        next-hop-self
    neighbor 10.10.42.1
        remote-as 65000
        update-source Loopback0
        next-hop-self
    neighbor 10.10.52.1
        remote-as 65000
        update-source Loopback0
        next-hop-self
commit
end</code></pre>
                    </div>
                </div>
                <p>Para anunciar una IP en una interfaz en un entorno MPLS, debes utilizar el comando <marcador class="subrayado">mpls ldp discovery transport-address IP</marcador>, donde <span class="subrayado">IP</span> es la direcci√≥n IP que deseas configurar en la interfaz correspondiente para que el protocolo LDP pueda utilizarla.</p>
                <p>Generalmente se utiliza la direcci√≥n IP del router ID como la direcci√≥n de transporte para LDP, ya que es una direcci√≥n estable y √∫nica, lo que mejora la confiabilidad y la gesti√≥n de la red.</p>
                <div class="contenedor">
                    <div class="etiqueta">
                        Ver la tabla MPLS:
                    </div>
                    <div class="comandos">
                      <input type="text" class="text" value="show mpls forwarding-table" oninput="ajustarAncho(this)">
                      <button><i class="fa fa-clone"></i><span> Copy</span></button>
                    </div>
                </div>
                <p>Este comando muestra las entradas de la tabla de conmutaci√≥n de etiquetas (MPLS Forwarding Table), indicando la correspondencia entre las etiquetas y las rutas.</p>
                <div class="contenedor">
                    <div class="etiqueta">
                        Ver las etiquetas asignadas:
                    </div>
                    <div class="comandos">
                      <input type="text" class="text" value="show mpls ldp bindings" oninput="ajustarAncho(this)">
                      <button><i class="fa fa-clone"></i><span> Copy</span></button>
                    </div>
                </div>
                <p>Este comando muestra los enlaces LDP (Label Distribution Protocol) y las etiquetas asociadas.</p>
                <div class="contenedor">
                    <div class="etiqueta">
                        Ver los vecinos LDP:
                    </div>
                    <div class="comandos">
                      <input type="text" class="text" value="show mpls ldp neighbor" oninput="ajustarAncho(this)">
                      <button><i class="fa fa-clone"></i><span> Copy</span></button>
                    </div>
                </div>
                <div class="contenedor">
                    <div class="etiqueta">
                        Ver el MTU de la interfaz GigabitEthernet0/0/0:
                    </div>
                    <div class="comandos">
                        <input type="text" class="text" value="do show im database interface gigabit0/0/0" oninput="ajustarAncho(this)">
                        <button><i class="fa fa-clone"></i><span> Copy</span></button>
                    </div>
                </div>
                <h5>Huawei</h5>
                <p>‚ùç Configuraci√≥n para IOS_PE2</p>
                <div class="consola">
                    
                    <div class="barra-superior-consola">
                        <div class="grupo-icono-texto">
                            <img src="../media/cmd.png" alt="Icono" class="icono-cmd">
                            <span class="texto-cmd">C:\Windows\system32\cmd.exe</span>
                        </div>
                        <button class="boton-copiar-consola"><i class="fas fa-copy"></i>&nbsp;Copy</button>
                    </div>
                    <div class="codigo-consola">
                        <!-- Contenido del c√≥digo -->
<pre><code>system-view

! Habilitar MPLS en el router
mpls
mpls ldp
mpls lsr-id 2.2.2.2
mpls ldp label policy static
mpls ldp label range 200 400
mpls ldp hello interval 4
mpls ldp hello hold-time 16
mpls ldp keepalive hold-time 100

! Configurar interfaces para MPLS con MTU modificada
interface GigabitEthernet0/0/0
    mtu 9216
    mpls
interface GigabitEthernet0/0/1
    mtu 9216
    mpls

! Configurar OSPF para la conectividad IGP
ospf 1
    area 0.0.0.0
    network 2.2.2.2 0.0.0.0
    network 10.10.21.0 0.0.0.3
    network 10.10.22.0 0.0.0.3

! Configurar BGP con Core1
bgp 65000
    peer 100.1.1.1 as-number 65000
    peer 100.1.1.1 connect-interface Loopback0
    peer 100.1.1.1 next-hop-local
quit</code></pre>
                    </div>
                </div>                
                <div class="contenedor">
                    <div class="etiqueta">
                        Ver la tabla de conmutaci√≥n de etiquetas MPLS:
                    </div>
                    <div class="comandos">
                      <input type="text" class="text" value="display mpls forwarding-table" oninput="ajustarAncho(this)">
                      <button><i class="fa fa-clone"></i><span> Copy</span></button>
                    </div>
                </div>
                <p>Este comando muestra la tabla de conmutaci√≥n de etiquetas MPLS, que incluye las entradas de las etiquetas y las rutas a las que est√°n asociadas.</p>
                <div class="contenedor">
                    <div class="etiqueta">
                        Ver las etiquetas LDP (si est√°s usando LDP para la distribuci√≥n de etiquetas):
                    </div>
                    <div class="comandos">
                      <input type="text" class="text" value="display mpls ldp bindings" oninput="ajustarAncho(this)">
                      <button><i class="fa fa-clone"></i><span> Copy</span></button>
                    </div>
                </div>
                <p>Este comando muestra las etiquetas LDP asignadas, las cuales se utilizan para la conmutaci√≥n de tr√°fico MPLS a trav√©s de la red.</p>
                <div class="contenedor">
                    <div class="etiqueta">
                        Ver los vecinos LDP:
                    </div>
                    <div class="comandos">
                      <input type="text" class="text" value="display mpls ldp neighbor" oninput="ajustarAncho(this)">
                      <button><i class="fa fa-clone"></i><span> Copy</span></button>
                    </div>
                </div>
                <h2>LDP-IGP Synchronization</h2>
                <p>El LDP-IGP Synchronization (LDP-IGP Sync) es una t√©cnica que ayuda a evitar la p√©rdida de paquetes en una red MPLS cuando un Label Switched Path (LSP) no est√° completamente establecido en un enlace. Esto es importante porque en redes MPLS, si el IGP (como OSPF o IS-IS) instala una ruta en la tabla de enrutamiento antes de que LDP haya podido establecer el LSP correspondiente, los paquetes pueden ser enviados sin etiquetas, causando p√©rdida de tr√°fico o forwarding incorrecto.</p>
                <p>Cuando se habilita LDP-IGP Sync, el proceso funciona de la siguiente manera:</p>
                <ol>
                    <li><marcador class="resaltado8">Detecci√≥n del estado de LDP: </marcador>Cada router monitorea si LDP ha podido establecer LSPs en las interfaces donde se ha activado.</li>
                    <li><marcador class="resaltado8">Modificaci√≥n de la m√©trica IGP: </marcador>Si el LSP en un enlace falla o a√∫n no est√° disponible, el router incrementa artificialmente la m√©trica del enlace en el IGP (OSPF/IS-IS).</li>
                    <p>Esto hace que el IGP seleccione otro camino donde LDP s√≠ tenga un LSP funcional.</p>
                    <li><marcador class="resaltado8">Restauraci√≥n de la m√©trica: </marcador>Una vez que el LSP se restablece, la m√©trica del enlace vuelve a su valor normal y el tr√°fico puede fluir nuevamente por la ruta MPLS.</li>
                </ol>
                <p>Si el LSP falla en un enlace y LDP-IGP Sync est√° habilitado, el IGP intentar√° evitar ese enlace y redirigir√° el tr√°fico por otra ruta con un LSP v√°lido. Esto previene la p√©rdida de paquetes y el reenv√≠o de tr√°fico sin etiquetas.</p>
                <p>Si LDP-IGP Sync no est√° habilitado, el tr√°fico IP podr√≠a seguir usando la ruta fallida, pero como no hay etiquetas MPLS, los paquetes podr√≠an perderse o ser enviados incorrectamente.</p>
                <p>Si est√°s utilizando OSPF como protocolo de enrutamiento, habilitas LDP-IGP Sync con el siguiente comando dentro del proceso OSPF:</p>
                <div class="consola">
                    
                    <div class="barra-superior-consola">
                        <div class="grupo-icono-texto">
                            <img src="../media/cmd.png" alt="Icono" class="icono-cmd">
                            <span class="texto-cmd">C:\Windows\system32\cmd.exe</span>
                        </div>
                        <button class="boton-copiar-consola"><i class="fas fa-copy"></i>&nbsp;Copy</button>
                    </div>
                    <div class="codigo-consola">
                        <!-- Contenido del c√≥digo -->
<pre><code>router(config)# router ospf 1
router(config-router)# mpls ldp sync</code></pre>
                    </div>
                </div>
                <p>Si deseas activarlo solo en una interfaz espec√≠fica, usa:</p>
                <div class="consola">
                    
                    <div class="barra-superior-consola">
                        <div class="grupo-icono-texto">
                            <img src="../media/cmd.png" alt="Icono" class="icono-cmd">
                            <span class="texto-cmd">C:\Windows\system32\cmd.exe</span>
                        </div>
                        <button class="boton-copiar-consola"><i class="fas fa-copy"></i>&nbsp;Copy</button>
                    </div>
                    <div class="codigo-consola">
                        <!-- Contenido del c√≥digo -->
<pre><code>router(config)# ospf 1
router(config-router)# area 0
router(config-if)# interface GigabitEthernet0/0
router(config-if)# mpls ldp sync</code></pre>
                    </div>
                </div>
                <p>El holdtime del sincronismo LDP-IGP (mpls ldp sync) es el tiempo que se espera antes de considerar que la sesi√≥n LDP ha fallado. Por defecto, este valor suele ser de 30 segundos, pero puede ajustarse seg√∫n la configuraci√≥n de la red con el comando <marcador class="subrayado">mpls ldp igp sync holddown <span class="subrayado">segundos</span></marcador>, donde <span class="subrayado">segundos</span> es el tiempo definido en segundos, o <marcador class="subrayado">mpls ldp igp sync delay <span class="subrayado">segundos</span></marcador> para XR.</p>
                <div class="blog-image">
                    <img src="media/mpls14.png" alt="">
                </div>
                <h2>Autenticaci√≥n de LDP</h2>
                <p>La autenticaci√≥n en LDP (Label Distribution Protocol) es crucial para garantizar que las conexiones LDP sean establecidas solo entre routers confiables. Para implementar la autenticaci√≥n de LDP y restringir el acceso a las direcciones IP espec√≠ficas, puedes usar una lista de acceso (ACL) que permita solo esas IPs.</p>
                <p>Para habilitar la autenticaci√≥n LDP en MPLS, puedes configurar lo siguiente:</p>
                <div class="consola">
                    <div class="barra-superior-consola">
                        <div class="grupo-icono-texto">
                            <img src="../media/cmd.png" alt="Icono" class="icono-cmd">
                            <span class="texto-cmd">C:\Windows\system32\cmd.exe</span>
                        </div>
                        <button class="boton-copiar-consola"><i class="fas fa-copy"></i>&nbsp;Copy</button>
                    </div>
                    <div class="codigo-consola">
                        <!-- Contenido del c√≥digo -->
                <pre><code>router(config)# access-list 1 permit 2.2.2.2
router(config)# access-list 1 permit 100.2.2.2
router(config)# access-list 1 deny
router(config)# mpls ldp neighbor 2.2.2.2 password CISCO123
router(config)# mpls ldp neighbor 100.2.2.2 password CISCO123
router(config)# mpls ldp password required for 1</code></pre>
                    </div>
                </div>
                <p>Esta autenticaci√≥n asegura que solo los routers con las IPs autorizadas puedan establecer sesiones LDP entre s√≠, proporcionando un nivel adicional de seguridad en la red MPLS.</p>
                <p>El comando <marcador class="subrayado">mlps ldp password required</marcador> en la autenticaci√≥n MPLS es crucial para exigir obligatoriamente que todas las sesiones (LDP o RSVP-TE) se autentiquen, rechazando conexiones con routers que no presenten credenciales v√°lidas.</p>
                <div class="contenedor">
                    <div class="etiqueta">
                        Habilita autenticaci√≥n MD5 para sesiones LDP vecinas:
                    </div>
                    <div class="comandos">
                      <input type="text" class="text" value="mpls ldp neighbor 100.1.1.1 password CISCO123" oninput="ajustarAncho(this)">
                      <button><i class="fa fa-clone"></i><span> Copy</span></button>
                    </div>
                </div>
                <h2>Creaci√≥n de Sesiones Remotas de LDP</h2>
                <p>En redes MPLS, puede ser necesario establecer sesiones LDP directamente entre dos routers remotos, salt√°ndose un router intermedio. Este enfoque puede ser √∫til en ciertos casos donde no se desea que un router intermedio participe en la distribuci√≥n de etiquetas, o cuando se busca optimizar el uso de recursos.</p>
                <div class="consola">
                    <div class="barra-superior-consola">
                        <div class="grupo-icono-texto">
                            <img src="../media/cmd.png" alt="Icono" class="icono-cmd">
                            <span class="texto-cmd">C:\Windows\system32\cmd.exe</span>
                        </div>
                        <button class="boton-copiar-consola"><i class="fas fa-copy"></i>&nbsp;Copy</button>
                    </div>
                    <div class="codigo-consola">
                        <pre><code>router(config)# access-list 1 remark Remote-LDP-peer
router(config)# access-list 1 permit 100.2.2.2
router(config)# access-list 1 deny
router(config)# mpls ldp discovery targeted-hello accept from 1
router(config)# mpls ldp neighbor 100.2.2.2 targeted ldp
router(config)# mpls ldp discovery targeted-hello interval 10
router(config)# mpls ldp discovery targeted-hello holdtime 90</code></pre>
                    </div>
                </div>                
                <p>Esta configuraci√≥n en el primer router realiza lo siguiente:</p>
                <ul>
                    <li>Se crea una lista de acceso (ACL) que permite √∫nicamente la IP del router remoto (<code>100.2.2.2</code>), evitando conexiones no deseadas.</li>
                    <li>El comando <marcador class="subrayado">mpls ldp discovery targeted-hello accept from 1</marcador> permite que el router acepte mensajes `targeted-hello` solo de la IP configurada en la ACL.</li>
                    <li>El comando <marcador class="subrayado">mpls ldp neighbor 100.2.2.2 targeted ldp</marcador> establece una sesi√≥n LDP remota con el router <code>100.2.2.2</code>, sin necesidad de un enlace directo entre ellos.</li>
                </ul>
                <p>Recuerda que es necesario tener configurada la conectividad entre estos dos routers de forma adecuada, ya que las sesiones remotas solo se pueden establecer si hay una ruta disponible entre ellos. Esta configuraci√≥n es √∫til cuando se desean establecer conexiones espec√≠ficas entre routers remotos para un control m√°s granular del tr√°fico MPLS.</p>
                <p>En el router XR, los pasos son similares.</p>
                <div class="consola">
                    <div class="barra-superior-consola">
                        <div class="grupo-icono-texto">
                            <img src="../media/cmd.png" alt="Icono" class="icono-cmd">
                            <span class="texto-cmd">C:\Windows\system32\cmd.exe</span>
                        </div>
                        <button class="boton-copiar-consola"><i class="fas fa-copy"></i>&nbsp;Copy</button>
                    </div>
                    <div class="codigo-consola">
                        <pre><code>router(config)# ipv4 access-list remote-LDP-peer
router(config-ipv4-acl)# permit 2.2.2.2
router(config-ipv4-acl)# exit
router(config)# mpls ldp address-family ipv4
router(config-ldp-af)# discovery targeted-hello accept from remote
router(config-ldp-af)# neighbor 2.2.2.2 targeted
router(config-ldp-af)# root
router(config-ldp-af)# exit
router(config)# mpls ldp discovery
router(config-ldp-disc)# targeted-hello interval 10
router(config-ldp-disc)# targeted-hello holdtime 90</code></pre>
                    </div>
                </div>                             
                <p>Con esta configuraci√≥n, los dos routers pueden establecer una comunicaci√≥n LDP remota a trav√©s de un enlace de transporte, sin necesidad de conectividad directa. Esto puede ser √∫til cuando se desea establecer rutas LDP entre routers en diferentes ubicaciones sin depender de un router intermedio para la distribuci√≥n de etiquetas.</p>
                <p>Al usar el comando <marcador class="subrayado">mpls ldp discovery all detail</marcador> se obtiene informaci√≥n detallada sobre los descubrimientos LDP, como las direcciones IP de los vecinos, el estado de la sesi√≥n, los timers de hello y el estado de las sesiones LDP activas. Esta informaci√≥n es √∫til para realizar un diagn√≥stico completo de la operaci√≥n de LDP.</p>
                <p>El comando <marcador class="subrayado">mpls ldp discovery backoff 15 120</marcador> establece que el router esperar√° 15 segundos antes de intentar nuevamente descubrir a los vecinos LDP tras un fallo, y repetir√° este intento durante un m√°ximo de 120 segundos. Estos valores permiten controlar el comportamiento del protocolo LDP en situaciones de fallo, evitando intentos de descubrimiento demasiado frecuentes.</p>                <div class="blog-image">
                    <img src="media/mpls15.gif" alt="">
                </div>
                <p></p>
            </div>
        </div>       
    </main>
    <script src="../js/script.js"></script>
</body>
</html>