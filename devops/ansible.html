<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Blog de Tecnolog√≠a</title>
    <link rel="icon" href="../media/imagen41.png" type="image/png">
    <script src="https://kit.fontawesome.com/9474e300a6.js" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="../css/estilos-articulo.css">
</head>
<body>

    <header>
        <div class="container__header">
            <div class="logo">
                <img src="../media/logo-1.png" alt="">
            </div>

            <div class="menu">
                <nav>
                    <ul>
                        <li><a href="../index.html">Inicio</a></li>
                        <li><a href="../electronica.html">Electr√≥nica</a></li>
                        <li><a href="../network.html">Networking</a></li>
                        <li><a href="../ia.html">Inteligencia Artificial</a></li>
                        <li><a href="../hacking.html">Ciberseguridad</a></li>
                        <li><a href="../devops.html">DevOps</a></li>
                    </ul>
                </nav>
            </div>
            <i class="fa-solid fa-bars" style="color: #ffffff;" id="icon_menu"></i>
            <div class="header__botonMenu">
                <input type="button" class="btn__header-botonMenu" value="Aportar" onclick="window.open('https://buymeacoffee.com/ryuzak1', '_blank');">
            </div>
        </div>
    </header>
    <main>
        <div class="cover">
            <div class="text__articulo-cover">
                <br>
                <br>
                <h1>Ansible</h1>
                <p>Ansible es una potente herramienta de automatizaci√≥n de c√≥digo abierto que simplifica la gesti√≥n de configuraciones, la implementaci√≥n de aplicaciones y la orquestaci√≥n de tareas en entornos inform√°ticos. A diferencia de otras herramientas similares, Ansible opera sin necesidad de instalar agentes en los sistemas que administra, lo que reduce la complejidad y el mantenimiento.</p>
                <p>Su funcionamiento se basa en la creaci√≥n de "playbooks", archivos escritos en YAML que describen el estado deseado de los sistemas y las tareas a realizar. Ansible se conecta a los servidores a trav√©s de SSH (en sistemas Linux/Unix) o WinRM (en Windows) y ejecuta los m√≥dulos definidos en los playbooks para lograr la configuraci√≥n deseada. Esta arquitectura sin agentes y su lenguaje declarativo hacen de Ansible una herramienta vers√°til y f√°cil de usar para automatizar una amplia gama de tareas de TI.</p>
                <div class="blog-image-grande">
                    <img src="media/ansible1.png" alt="">
                </div>
                <h2>¬øPara qu√© sirve?</h2>
                <p>Ansible se usa para automatizar:</p>
                <ul  style="list-style-type: none;">
                    <li>üéÆ Configuraci√≥n de servidores (como instalar paquetes o cambiar archivos de configuraci√≥n).</li>
                    <li>üéÆ Despliegue de aplicaciones.</li>
                    <li>üéÆ Orquestaci√≥n de tareas entre m√∫ltiples sistemas.</li>
                    <li>üéÆ Gesti√≥n de usuarios, servicios y actualizaciones.</li>
                    <li>üéÆ Integraci√≥n con la nube (AWS, GCP, Azure, etc).</li>
                </ul>
                <p>Todo esto a trav√©s de playbooks escritos en YAML, lo que lo hace muy legible y f√°cil de versionar.</p>
                <div class="blog-image-grande">
                    <img src="media/ansible2.png" alt="">
                </div>
                <h2>Arquitectura</h2>
                <p>Ansible, una herramienta de automatizaci√≥n de c√≥digo abierto, destaca por su modelo push sin agentes, donde un nodo de control se conecta v√≠a SSH a los hosts definidos en un inventario para ejecutar tareas, lo que simplifica la gesti√≥n al eliminar la necesidad de instalar software en los nodos remotos. A pesar de su simplicidad, Ansible cuenta con una arquitectura robusta, compuesta por componentes esenciales que trabajan conjuntamente para permitir la automatizaci√≥n eficiente y segura de diversas tareas en entornos inform√°ticos.</p>
                <h6>Nodo de Control (Control Node)</h6>
                <p>Este es el punto central desde donde se ejecutan todos los comandos y playbooks. Es la m√°quina que tiene Ansible instalado y desde la cual se orquesta todo. Puede ser una laptop, servidor o contenedor, siempre que tenga acceso SSH a los nodos gestionados.</p>
                <ul  style="list-style-type: none;">
                    <li>‚óà No requiere instalar software en los destinos.</li>
                    <li>‚óà Es donde escribes y ejecutas tus playbooks.</li>
                    <li>‚óà Solo un nodo de control es necesario para manejar cientos o miles de hosts.</li>
                </ul>
                <div class="blog-image">
                    <img src="media/ansible3.avif" alt="">
                </div>
                <h6>Inventario (Inventory)</h6>
                <p>El inventario es un archivo que define los hosts o grupos de hosts sobre los cuales Ansible va a ejecutar tareas. Puede ser est√°tico (archivo INI o YAML) o din√°mico (generado desde scripts o nubes como AWS, GCP, Azure).</p>
                <p>‚å≠ Ejemplo:</p>
                <div class="archivo">
[webservers]
192.168.1.10
192.168.1.11

[db]
dbserver ansible_host=192.168.1.20
                </div>
                <p>Ansible usa esta informaci√≥n para conectarse a los hosts usando SSH, y para aplicar tareas en grupos espec√≠ficos.</p>
                <div class="blog-image-grande">
                    <img src="media/ansible4.png" alt="">
                </div>
                <h6>Playbooks</h6>
                <p>Los playbooks son archivos escritos en YAML que definen qu√© tareas deben ejecutarse en qu√© hosts. Representan el coraz√≥n de la automatizaci√≥n en Ansible, y permiten definir flujos de trabajo complejos de manera ordenada y legible.</p>
                <p>Cada playbook contiene:</p>
                <ul  style="list-style-type: none;">
                    <li>‚óà Un grupo de hosts.</li>
                    <li>‚óà Privilegios (como become: true para sudo).</li>
                    <li>‚óà Una lista ordenada de tareas.</li>
                    <li>‚óà Variables y condicionales.</li>
                </ul>
                <div class="blog-image-grande">
                    <img src="media/ansible5.png" alt="">
                </div>
                <div class="blog-image-grande">
                    <img src="media/ansible6.png" alt="">
                </div>
                <h6>M√≥dulos</h6>
                <p>Los m√≥dulos son unidades de trabajo reutilizables que ejecutan tareas espec√≠ficas, como instalar paquetes, copiar archivos, crear usuarios, reiniciar servicios, etc. Ansible tiene cientos de m√≥dulos integrados, y puedes crear los tuyos propios.</p>
                <p>Ejemplos de m√≥dulos comunes:</p>
                <ul  style="list-style-type: none;">
                    <li>‚óà <marcador class="subrayado">apt</marcador>, <marcador class="subrayado">yum</marcador>, <marcador class="subrayado">dnf</marcador> ‚Üí Instalaci√≥n de paquetes.</li>
                    <li>‚óà <marcador class="subrayado">copy</marcador>, <marcador class="subrayado">template</marcador> ‚Üí Archivos.</li>
                    <li>‚óà <marcador class="subrayado">user</marcador>, <marcador class="subrayado">group</marcador> ‚Üí Gesti√≥n de usuarios.</li>
                    <li>‚óà <marcador class="subrayado">service</marcador> ‚Üí Control de servicios.</li>
                </ul>

                <p>Se ejecutan en los hosts remotos y son idempotentes: si algo ya est√° hecho, no se vuelve a aplicar.</p>
                <br>
                <p>La documentaci√≥n oficial de <a href="https://docs.ansible.com/ansible/2.9/modules/list_of_all_modules.html" target="blank">Ansible</a>, es la fuente principal para obtener informaci√≥n detallada sobre los m√≥dulos disponibles, incluyendo descripciones exhaustivas y ejemplos pr√°cticos de uso.</p>
                <p>Tambi√©n puedes utilizar el comando <marcador class="subrayado">ansible-doc</marcador> en tu l√≠nea de comandos para obtener informaci√≥n sobre los m√≥dulos disponibles.</p>
                <div class="contenedor">
                    <div class="etiqueta">
                        Comando ansible-doc para listar todos los m√≥dulos disponibles:
                    </div>
                    <div class="comandos">
                        <input type="text" class="text" value="ansible-doc -l" oninput="ajustarAncho(this)">
                        <button><i class="fa fa-clone"></i><span> Copy</span></button>
                    </div>
                </div>  
                <div class="contenedor">
                    <div class="etiqueta">
                        Comando ansible-doc para obtener informaci√≥n de un m√≥dulo espec√≠fico:
                    </div>
                    <div class="comandos">
                        <input type="text" class="text" value="ansible-doc <nombre_del_m√≥dulo>" oninput="ajustarAncho(this)">
                        <button><i class="fa fa-clone"></i><span> Copy</span></button>
                    </div>
                </div>
                <div class="blog-image-zoom">
                    <img src="media/ansible7.png" alt="">
                </div>
                <h6>Roles</h6>
                <p>En Ansible, los roles son una forma estructurada y reutilizable de organizar c√≥digo. Permiten dividir una automatizaci√≥n compleja en piezas peque√±as, modulares y f√°ciles de mantener. Cada rol se encarga de una funcionalidad espec√≠fica (como instalar Apache, configurar un firewall o gestionar usuarios).</p>
                <p>Se usan principalmente para:</p>
                <ul  style="list-style-type: none;">
                    <li>‚óà Modularizar proyectos grandes.</li>
                    <li>‚óà Reutilizar c√≥digo entre diferentes playbooks.</li>
                    <li>‚óà Establecer una convenci√≥n est√°ndar de carpetas.</li>
                </ul>
                <p>Cuando usas un rol, Ansible carga autom√°ticamente sus tareas, archivos, variables, templates y handlers.</p>
                <p>‚å≠ Estructura de un rol:</p>
                <div class="archivo">
roles/
‚îî‚îÄ‚îÄ nombre_del_rol/
    ‚îú‚îÄ‚îÄ defaults/      ‚Üí Variables por defecto (m√°s d√©biles)
    ‚îÇ   ‚îî‚îÄ‚îÄ main.yml
    ‚îú‚îÄ‚îÄ vars/          ‚Üí Variables fuertes (sobrescriben a defaults)
    ‚îÇ   ‚îî‚îÄ‚îÄ main.yml
    ‚îú‚îÄ‚îÄ files/         ‚Üí Archivos que se copian tal cual
    ‚îú‚îÄ‚îÄ templates/     ‚Üí Archivos .j2 que usan variables
    ‚îú‚îÄ‚îÄ tasks/         ‚Üí Lista principal de tareas
    ‚îÇ   ‚îî‚îÄ‚îÄ main.yml
    ‚îú‚îÄ‚îÄ handlers/      ‚Üí Acciones que se ejecutan tras cambios (ej: reiniciar)
    ‚îú‚îÄ‚îÄ meta/          ‚Üí Dependencias con otros roles
    ‚îî‚îÄ‚îÄ README.md      ‚Üí Documentaci√≥n del rol
                </div>
                <p>Los roles m√°s comunes o recomendados al dise√±ar infraestructuras automatizadas son:</p>
                <ul style="list-style-type: none;">
                    <li>‚ó¨ <marcador class="resaltado2">Roles de sistema operativo</marcador></li>
                    <ul style="list-style-type: none;">
                        <li>‚àò <marcador class="resaltado8">os_hardening: </marcador>seguridad del sistema.</li>
                        <li>‚àò <marcador class="resaltado8">common: </marcador>ajustes b√°sicos como timezone, idioma, hostname, usuarios.</li>
                    </ul>
                    <li>‚ó¨ <marcador class="resaltado2">Roles de red y conectividad</marcador></li>
                    <ul style="list-style-type: none;">
                        <li>‚àò <marcador class="resaltado8">firewall: </marcador>gesti√≥n de reglas iptables o firewalld.</li>
                        <li>‚àò <marcador class="resaltado8">dns_client: </marcador>configurar DNS y resolv.conf.</li>
                        <li>‚àò <marcador class="resaltado8">ntp: </marcador>sincronizaci√≥n horaria.</li>
                    </ul>
                    <li>‚ó¨ <marcador class="resaltado2">Roles de herramientas</marcador></li>
                    <ul style="list-style-type: none;">
                        <li>‚àò <marcador class="resaltado8">docker: </marcador>instalaci√≥n y configuraci√≥n del engine.</li>
                        <li>‚àò <marcador class="resaltado8">kubernetes: </marcador>instalaci√≥n del cl√∫ster.</li>
                        <li>‚àò <marcador class="resaltado8">monitoring: </marcador>configuraci√≥n de Prometheus, Grafana, etc.</li>
                    </ul>
                    <li>‚ó¨ <marcador class="resaltado2">Roles de aplicaciones</marcador></li>
                    <ul style="list-style-type: none;">
                        <li>‚àò <marcador class="resaltado8">nginx, apache, haproxy: </marcador>servidores web o balanceadores.</li>
                        <li>‚àò <marcador class="resaltado8">mysql, postgres, mongodb: </marcador>bases de datos.</li>
                        <li>‚àò <marcador class="resaltado8">app_deploy: </marcador>despliegue de aplicaciones personalizadas.</li>
                    </ul>
                    <li>‚ó¨ <marcador class="resaltado2">Roles de seguridad</marcador></li>
                    <ul style="list-style-type: none;">
                        <li>‚àò <marcador class="resaltado8">fail2ban: </marcador>protecci√≥n contra fuerza bruta.</li>
                        <li>‚àò <marcador class="resaltado8">ssh_hardening: </marcador>pol√≠ticas de acceso remoto.</li>
                        <li>‚àò <marcador class="resaltado8">users: </marcador>crear y gestionar usuarios seguros.</li>
                    </ul>
                </ul>
                <br>
                <p>La arquitectura de Ansible, basada en roles, promueve una clara separaci√≥n de responsabilidades, lo que resulta en un c√≥digo m√°s limpio y f√°cil de mantener. Esta modularidad facilita la reutilizaci√≥n de configuraciones entre distintos proyectos o entornos, optimizando el tiempo y el esfuerzo invertido en la automatizaci√≥n. Adem√°s, Ansible Galaxy permite compartir estos roles con otros equipos o incluso con la comunidad global, fomentando la colaboraci√≥n y la adopci√≥n de mejores pr√°cticas.</p>
                <h6>Plugins</h6>
                <p>Ansible tiene plugins para extender funcionalidades. Algunos tipos son:</p>
                <ul style="list-style-type: none;">
                    <li>‚ñ± <marcador class="resaltado3">Connection Plugins: </marcador>controlan c√≥mo Ansible se conecta a los hosts (ej. ssh, local, paramiko).</li>
                    <li>‚ñ± <marcador class="resaltado3">Callback Plugins: </marcador>definen c√≥mo se muestra la salida (por ejemplo, en JSON o en formato legible).</li>
                    <li>‚ñ± <marcador class="resaltado3">Lookup Plugins: </marcador>permiten acceder a datos externos, como contrase√±as o inventarios din√°micos.</li>
                </ul>
                <div class="blog-image-zoom">
                    <img src="media/ansible9.png" alt="">
                </div>
                <h6>Ansible Vault</h6>
                <p>Aunque no es obligatorio, ansible-vault permite encriptar archivos sensibles como contrase√±as, claves o tokens. Se integra directamente con los playbooks y evita guardar secretos en texto plano.</p>
                <div class="contenedor">
                    <div class="etiqueta">
                        Cifrar un archivo con Ansible Vault:
                    </div>
                    <div class="comandos">
                        <input type="text" class="text" value="ansible-vault encrypt secrets.yml" oninput="ajustarAncho(this)">
                        <button><i class="fa fa-clone"></i><span> Copy</span></button>
                    </div>
                </div>
                <h6>Ansible Galaxy</h6>
                <p>Ansible Galaxy es un repositorio en l√≠nea que sirve como una plataforma centralizada para compartir y descubrir contenido de Ansible. Principalmente, alberga "roles" y "colecciones", que son unidades preempaquetadas de c√≥digo Ansible dise√±adas para simplificar la automatizaci√≥n de tareas complejas. Los roles y colecciones permiten a los usuarios reutilizar configuraciones y mejores pr√°cticas, acelerando as√≠ el desarrollo y la implementaci√≥n de automatizaciones.</p>
                <p>En resumen, <a href="https://galaxy.ansible.com/ui/standalone/roles/" target="blank">Ansible Galaxy</a> es el repositorio donde la comunidad comparte roles ya listos para usar. Algunos ejemplos populares:</p>
                <table>
                    <tr>
                        <th>Rol</th>
                        <th>Descripci√≥n</th>
                    </tr>
                    <tr>
                        <td>geerlingguy.mysql</td>
                        <td>Instala y configura MySQL/MariaDB.</td>
                    </tr>
                    <tr>
                        <td>geerlingguy.apache</td>
                        <td>Configura servidores Apache.</td>
                    </tr>
                    <tr>
                        <td>nginxinc.nginx</td>
                        <td>Rol oficial de NGINX para configurar y administrar.</td>
                    </tr>
                    <tr>
                        <td>dev-sec.os-hardening</td>
                        <td>Aplica pol√≠ticas de seguridad al sistema operativo.</td>
                    </tr>
                    <tr>
                        <td>elastic.elasticsearch</td>
                        <td>Implementa un cl√∫ster de Elasticsearch.</td>
                    </tr>
                    <tr>
                        <td>ansible-role-docker</td>
                        <td>Instala y configura Docker Engine.</td>
                    </tr>
                </table>
                <div class="contenedor">
                    <div class="etiqueta">
                        Se instalan as√≠:
                    </div>
                    <div class="comandos">
                        <input type="text" class="text" value="ansible-galaxy install geerlingguy.apache" oninput="ajustarAncho(this)">
                        <button><i class="fa fa-clone"></i><span> Copy</span></button>
                    </div>
                </div>
                <p>Y luego los llamas desde tu playbook.</p>
                <div class="blog-image-zoom">
                    <img src="media/ansible10.png" alt="">
                </div>
                <h6>Nodos Gestionados (Managed Nodes)</h6>
                <p>Son los servidores o dispositivos que Ansible administra. No requieren instalar ning√∫n software adicional: basta con que tengan SSH y Python. Las tareas se ejecutan desde el nodo de control hacia ellos.</p>
                <p>Pueden ser:</p>
                <ul  style="list-style-type: none;">
                    <li>‚óà Servidores Linux</li>
                    <li>‚óà Equipos Windows (usando WinRM)</li>
                    <li>‚óà Equipos de red (switches, routers, firewalls)</li>
                    <li>‚óà Entornos cloud</li>
                </ul>
                <br>
                <p>El flujo de ejecuci√≥n de Ansible comienza con la invocaci√≥n de un ansible-playbook, que act√∫a como el punto de entrada para la automatizaci√≥n. El nodo de control, donde se ejecuta Ansible, procede a leer el inventario, un archivo que define los hosts gestionados y sus agrupaciones, esencial para determinar a qu√© sistemas se aplicar√°n las tareas. A continuaci√≥n, Ansible carga los playbooks, archivos YAML que describen el estado deseado de los sistemas y las tareas a realizar, junto con las variables y roles necesarios para la configuraci√≥n. La conexi√≥n con los nodos gestionados se establece mediante SSH, un protocolo seguro que permite la ejecuci√≥n remota de comandos. Las tareas definidas en los playbooks se ejecutan secuencialmente, utilizando m√≥dulos de Ansible que realizan acciones espec√≠ficas en los sistemas remotos. Una caracter√≠stica clave de Ansible es su idempotencia: los cambios se aplican solo si son necesarios, evitando modificaciones innecesarias y asegurando la consistencia del sistema. Finalmente, Ansible muestra el resultado de la ejecuci√≥n, incluyendo cualquier error que haya ocurrido, proporcionando una visi√≥n clara del estado de la automatizaci√≥n.</p>
                <h2>Comandos b√°sicos</h2>
                <div class="contenedor">
                    <div class="etiqueta">
                        Instala Ansible en el sistema Ubuntu:
                    </div>
                    <div class="comandos">
                        <input type="text" class="text" value="sudo apt install ansible -y" oninput="ajustarAncho(this)">
                        <button><i class="fa fa-clone"></i><span> Copy</span></button>
                    </div>
                </div>
                <div class="contenedor">
                    <div class="etiqueta">
                        Verifica la conectividad SSH a todos los hosts definidos en el inventario:
                    </div>
                    <div class="comandos">
                        <input type="text" class="text" value="ansible all -m ping -i inventario.ini" oninput="ajustarAncho(this)">
                        <button><i class="fa fa-clone"></i><span> Copy</span></button>
                    </div>
                </div>
                <div class="contenedor">
                    <div class="etiqueta">
                        Ejecuta el comando "uptime" en los hosts del grupo "web":
                    </div>
                    <div class="comandos">
                        <input type="text" class="text" value="ansible web -a &quot;uptime&quot; -i inventario.ini" oninput="ajustarAncho(this)">
                        <button><i class="fa fa-clone"></i><span> Copy</span></button>
                    </div>
                </div>
                <div class="contenedor">
                    <div class="etiqueta">
                        Ejecuta el playbook "apache.yml" en los hosts definidos en el inventario:
                    </div>
                    <div class="comandos">
                        <input type="text" class="text" value="ansible-playbook apache.yml -i inventario.ini" oninput="ajustarAncho(this)">
                        <button><i class="fa fa-clone"></i><span> Copy</span></button>
                    </div>
                </div>
                <div class="blog-image-grande">
                    <img src="media/ansible11.png" alt="">
                </div>
                <p></p>
            </div>
        </div>       
    </main>
    <script src="../js/script.js"></script>
</body>
</html>