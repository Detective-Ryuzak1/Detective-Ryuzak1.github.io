<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Blog de Tecnolog√≠a</title>
    <link rel="icon" href="../media/imagen41.png" type="image/png">
    <script src="https://kit.fontawesome.com/9474e300a6.js" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="../css/estilos-articulo.css">
</head>
<body>

    <header>
        <div class="container__header">
            <div class="logo">
                <img src="../media/logo-1.png" alt="">
            </div>

            <div class="menu">
                <nav>
                    <ul>
                        <li><a href="../index.html">Inicio</a></li>
                        <li><a href="../electronica.html">Electr√≥nica</a></li>
                        <li><a href="../network.html">Networking</a></li>
                        <li><a href="../ia.html">Inteligencia Artificial</a></li>
                        <li><a href="../hacking.html">Ciberseguridad</a></li>
                        <li><a href="../devops.html">DevOps</a></li>
                    </ul>
                </nav>
            </div>
            <i class="fa-solid fa-bars" style="color: #ffffff;" id="icon_menu"></i>
            <div class="header__botonMenu">
                <input type="button" class="btn__header-botonMenu" value="Aportar" onclick="window.open('https://buymeacoffee.com/ryuzak1', '_blank');">
            </div>
        </div>
    </header>
    <main>
        <div class="cover">
            <div class="text__articulo-cover">
                <br>
                <br>
                <h1>Ansible</h1>
                <p>Ansible es una potente herramienta de automatizaci√≥n de c√≥digo abierto que simplifica la gesti√≥n de configuraciones, la implementaci√≥n de aplicaciones y la orquestaci√≥n de tareas en entornos inform√°ticos. A diferencia de otras herramientas similares, Ansible opera sin necesidad de instalar agentes en los sistemas que administra, lo que reduce la complejidad y el mantenimiento.</p>
                <p>Su funcionamiento se basa en la creaci√≥n de "playbooks", archivos escritos en YAML que describen el estado deseado de los sistemas y las tareas a realizar. Ansible se conecta a los servidores a trav√©s de SSH (en sistemas Linux/Unix) o WinRM (en Windows) y ejecuta los m√≥dulos definidos en los playbooks para lograr la configuraci√≥n deseada. Esta arquitectura sin agentes y su lenguaje declarativo hacen de Ansible una herramienta vers√°til y f√°cil de usar para automatizar una amplia gama de tareas de TI.</p>
                <div class="blog-image-grande">
                    <img src="media/ansible1.png" alt="">
                </div>
                <h2>¬øPara qu√© sirve?</h2>
                <p>Ansible se usa para automatizar:</p>
                <ul  style="list-style-type: none;">
                    <li>üéÆ Configuraci√≥n de servidores (como instalar paquetes o cambiar archivos de configuraci√≥n).</li>
                    <li>üéÆ Despliegue de aplicaciones.</li>
                    <li>üéÆ Orquestaci√≥n de tareas entre m√∫ltiples sistemas.</li>
                    <li>üéÆ Gesti√≥n de usuarios, servicios y actualizaciones.</li>
                    <li>üéÆ Integraci√≥n con la nube (AWS, GCP, Azure, etc).</li>
                </ul>
                <p>Todo esto a trav√©s de playbooks escritos en YAML, lo que lo hace muy legible y f√°cil de versionar.</p>
                <div class="blog-image-grande">
                    <img src="media/ansible2.png" alt="">
                </div>
                <h2>Arquitectura</h2>
                <p>Ansible, una herramienta de automatizaci√≥n de c√≥digo abierto, destaca por su modelo push sin agentes, donde un nodo de control se conecta v√≠a SSH a los hosts definidos en un inventario para ejecutar tareas, lo que simplifica la gesti√≥n al eliminar la necesidad de instalar software en los nodos remotos. A pesar de su simplicidad, Ansible cuenta con una arquitectura robusta, compuesta por componentes esenciales que trabajan conjuntamente para permitir la automatizaci√≥n eficiente y segura de diversas tareas en entornos inform√°ticos.</p>
                <h6>Nodo de Control (Control Node)</h6>
                <p>Este es el punto central desde donde se ejecutan todos los comandos y playbooks. Es la m√°quina que tiene Ansible instalado y desde la cual se orquesta todo. Puede ser una laptop, servidor o contenedor, siempre que tenga acceso SSH a los nodos gestionados.</p>
                <ul  style="list-style-type: none;">
                    <li>‚óà No requiere instalar software en los destinos.</li>
                    <li>‚óà Es donde escribes y ejecutas tus playbooks.</li>
                    <li>‚óà Solo un nodo de control es necesario para manejar cientos o miles de hosts.</li>
                </ul>
                <div class="blog-image">
                    <img src="media/ansible3.avif" alt="">
                </div>
                <h6>Inventario (Inventory)</h6>
                <p>El inventario es un archivo que define los hosts o grupos de hosts sobre los cuales Ansible va a ejecutar tareas. Puede ser est√°tico (archivo INI o YAML) o din√°mico (generado desde scripts o nubes como AWS, GCP, Azure).</p>
                <p>‚å≠ Ejemplo:</p>
                <div class="archivo">
[webservers]
192.168.1.10
192.168.1.11

[db]
dbserver ansible_host=192.168.1.20
                </div>
                <p>Ansible usa esta informaci√≥n para conectarse a los hosts usando SSH, y para aplicar tareas en grupos espec√≠ficos.</p>
                <div class="blog-image-grande">
                    <img src="media/ansible4.png" alt="">
                </div>
                <h6>Playbooks</h6>
                <p>Los playbooks son archivos escritos en YAML que definen qu√© tareas deben ejecutarse en qu√© hosts. Representan el coraz√≥n de la automatizaci√≥n en Ansible, y permiten definir flujos de trabajo complejos de manera ordenada y legible.</p>
                <p>Cada playbook contiene:</p>
                <ul  style="list-style-type: none;">
                    <li>‚óà Un grupo de hosts.</li>
                    <li>‚óà Privilegios (como become: true para sudo).</li>
                    <li>‚óà Una lista ordenada de tareas.</li>
                    <li>‚óà Variables y condicionales.</li>
                </ul>
                <div class="blog-image-grande">
                    <img src="media/ansible5.png" alt="">
                </div>
                <div class="blog-image-grande">
                    <img src="media/ansible6.png" alt="">
                </div>
                <h6>M√≥dulos</h6>
                <p>Los m√≥dulos son unidades de trabajo reutilizables que ejecutan tareas espec√≠ficas, como instalar paquetes, copiar archivos, crear usuarios, reiniciar servicios, etc. Ansible tiene cientos de m√≥dulos integrados, y puedes crear los tuyos propios.</p>
                <p>Ejemplos de m√≥dulos comunes:</p>
                <ul  style="list-style-type: none;">
                    <li>‚óà <marcador class="subrayado">apt</marcador>, <marcador class="subrayado">yum</marcador>, <marcador class="subrayado">dnf</marcador> ‚Üí Instalaci√≥n de paquetes.</li>
                    <li>‚óà <marcador class="subrayado">copy</marcador>, <marcador class="subrayado">template</marcador> ‚Üí Archivos.</li>
                    <li>‚óà <marcador class="subrayado">user</marcador>, <marcador class="subrayado">group</marcador> ‚Üí Gesti√≥n de usuarios.</li>
                    <li>‚óà <marcador class="subrayado">service</marcador> ‚Üí Control de servicios.</li>
                </ul>

                <p>Se ejecutan en los hosts remotos y son idempotentes: si algo ya est√° hecho, no se vuelve a aplicar.</p>
                <br>
                <p>La documentaci√≥n oficial de <a href="https://docs.ansible.com/ansible/latest/collections/ansible/builtin/index.html#plugins-in-ansible-builtin" target="blank">Ansible</a>, es la fuente principal para obtener informaci√≥n detallada sobre los m√≥dulos disponibles, incluyendo descripciones exhaustivas y ejemplos pr√°cticos de uso.</p>
                <p>Tambi√©n puedes utilizar el comando <marcador class="subrayado">ansible-doc</marcador> en tu l√≠nea de comandos para obtener informaci√≥n sobre los m√≥dulos disponibles.</p>
                <div class="contenedor">
                    <div class="etiqueta">
                        Comando ansible-doc para listar todos los m√≥dulos disponibles:
                    </div>
                    <div class="comandos">
                        <input type="text" class="text" value="ansible-doc -l" oninput="ajustarAncho(this)">
                        <button><i class="fa fa-clone"></i><span> Copy</span></button>
                    </div>
                </div>  
                <div class="contenedor">
                    <div class="etiqueta">
                        Comando ansible-doc para obtener informaci√≥n de un m√≥dulo espec√≠fico:
                    </div>
                    <div class="comandos">
                        <input type="text" class="text" value="ansible-doc <nombre_del_m√≥dulo>" oninput="ajustarAncho(this)">
                        <button><i class="fa fa-clone"></i><span> Copy</span></button>
                    </div>
                </div>
                <div class="blog-image-zoom">
                    <img src="media/ansible7.png" alt="">
                </div>
                <h6>Roles</h6>
                <p>En Ansible, los roles son una forma estructurada y reutilizable de organizar c√≥digo. Permiten dividir una automatizaci√≥n compleja en piezas peque√±as, modulares y f√°ciles de mantener. Cada rol se encarga de una funcionalidad espec√≠fica (como instalar Apache, configurar un firewall o gestionar usuarios).</p>
                <p>Se usan principalmente para:</p>
                <ul  style="list-style-type: none;">
                    <li>‚óà Modularizar proyectos grandes.</li>
                    <li>‚óà Reutilizar c√≥digo entre diferentes playbooks.</li>
                    <li>‚óà Establecer una convenci√≥n est√°ndar de carpetas.</li>
                </ul>
                <p>Cuando usas un rol, Ansible carga autom√°ticamente sus tareas, archivos, variables, templates y handlers.</p>
                <p>‚å≠ Estructura de un rol:</p>
                <div class="archivo">
roles/
‚îî‚îÄ‚îÄ nombre_del_rol/
    ‚îú‚îÄ‚îÄ defaults/      ‚Üí Variables por defecto (m√°s d√©biles)
    ‚îÇ   ‚îî‚îÄ‚îÄ main.yml
    ‚îú‚îÄ‚îÄ vars/          ‚Üí Variables fuertes (sobrescriben a defaults)
    ‚îÇ   ‚îî‚îÄ‚îÄ main.yml
    ‚îú‚îÄ‚îÄ files/         ‚Üí Archivos que se copian tal cual
    ‚îú‚îÄ‚îÄ templates/     ‚Üí Archivos .j2 que usan variables
    ‚îú‚îÄ‚îÄ tasks/         ‚Üí Lista principal de tareas
    ‚îÇ   ‚îî‚îÄ‚îÄ main.yml
    ‚îú‚îÄ‚îÄ handlers/      ‚Üí Acciones que se ejecutan tras cambios (ej: reiniciar)
    ‚îú‚îÄ‚îÄ meta/          ‚Üí Dependencias con otros roles
    ‚îî‚îÄ‚îÄ README.md      ‚Üí Documentaci√≥n del rol
                </div>
                <p>Los roles m√°s comunes o recomendados al dise√±ar infraestructuras automatizadas son:</p>
                <ul style="list-style-type: none;">
                    <li>‚ó¨ <marcador class="resaltado2">Roles de sistema operativo</marcador></li>
                    <ul style="list-style-type: none;">
                        <li>‚àò <marcador class="resaltado8">os_hardening: </marcador>seguridad del sistema.</li>
                        <li>‚àò <marcador class="resaltado8">common: </marcador>ajustes b√°sicos como timezone, idioma, hostname, usuarios.</li>
                    </ul>
                    <li>‚ó¨ <marcador class="resaltado2">Roles de red y conectividad</marcador></li>
                    <ul style="list-style-type: none;">
                        <li>‚àò <marcador class="resaltado8">firewall: </marcador>gesti√≥n de reglas iptables o firewalld.</li>
                        <li>‚àò <marcador class="resaltado8">dns_client: </marcador>configurar DNS y resolv.conf.</li>
                        <li>‚àò <marcador class="resaltado8">ntp: </marcador>sincronizaci√≥n horaria.</li>
                    </ul>
                    <li>‚ó¨ <marcador class="resaltado2">Roles de herramientas</marcador></li>
                    <ul style="list-style-type: none;">
                        <li>‚àò <marcador class="resaltado8">docker: </marcador>instalaci√≥n y configuraci√≥n del engine.</li>
                        <li>‚àò <marcador class="resaltado8">kubernetes: </marcador>instalaci√≥n del cl√∫ster.</li>
                        <li>‚àò <marcador class="resaltado8">monitoring: </marcador>configuraci√≥n de Prometheus, Grafana, etc.</li>
                    </ul>
                    <li>‚ó¨ <marcador class="resaltado2">Roles de aplicaciones</marcador></li>
                    <ul style="list-style-type: none;">
                        <li>‚àò <marcador class="resaltado8">nginx, apache, haproxy: </marcador>servidores web o balanceadores.</li>
                        <li>‚àò <marcador class="resaltado8">mysql, postgres, mongodb: </marcador>bases de datos.</li>
                        <li>‚àò <marcador class="resaltado8">app_deploy: </marcador>despliegue de aplicaciones personalizadas.</li>
                    </ul>
                    <li>‚ó¨ <marcador class="resaltado2">Roles de seguridad</marcador></li>
                    <ul style="list-style-type: none;">
                        <li>‚àò <marcador class="resaltado8">fail2ban: </marcador>protecci√≥n contra fuerza bruta.</li>
                        <li>‚àò <marcador class="resaltado8">ssh_hardening: </marcador>pol√≠ticas de acceso remoto.</li>
                        <li>‚àò <marcador class="resaltado8">users: </marcador>crear y gestionar usuarios seguros.</li>
                    </ul>
                </ul>
                <br>
                <p>La arquitectura de Ansible, basada en roles, promueve una clara separaci√≥n de responsabilidades, lo que resulta en un c√≥digo m√°s limpio y f√°cil de mantener. Esta modularidad facilita la reutilizaci√≥n de configuraciones entre distintos proyectos o entornos, optimizando el tiempo y el esfuerzo invertido en la automatizaci√≥n. Adem√°s, Ansible Galaxy permite compartir estos roles con otros equipos o incluso con la comunidad global, fomentando la colaboraci√≥n y la adopci√≥n de mejores pr√°cticas.</p>
                <h6>Plugins</h6>
                <p>Ansible tiene plugins para extender funcionalidades. Algunos tipos son:</p>
                <ul style="list-style-type: none;">
                    <li>‚ñ± <marcador class="resaltado3">Connection Plugins: </marcador>controlan c√≥mo Ansible se conecta a los hosts (ej. ssh, local, paramiko).</li>
                    <li>‚ñ± <marcador class="resaltado3">Callback Plugins: </marcador>definen c√≥mo se muestra la salida (por ejemplo, en JSON o en formato legible).</li>
                    <li>‚ñ± <marcador class="resaltado3">Lookup Plugins: </marcador>permiten acceder a datos externos, como contrase√±as o inventarios din√°micos.</li>
                </ul>
                <div class="blog-image-zoom">
                    <img src="media/ansible9.png" alt="">
                </div>
                <h6>Ansible Vault</h6>
                <p>Aunque no es obligatorio, ansible-vault permite encriptar archivos sensibles como contrase√±as, claves o tokens. Se integra directamente con los playbooks y evita guardar secretos en texto plano.</p>
                <div class="contenedor">
                    <div class="etiqueta">
                        Cifrar un archivo con Ansible Vault:
                    </div>
                    <div class="comandos">
                        <input type="text" class="text" value="ansible-vault encrypt secrets.yml" oninput="ajustarAncho(this)">
                        <button><i class="fa fa-clone"></i><span> Copy</span></button>
                    </div>
                </div>
                <h6>Ansible Galaxy</h6>
                <p>Ansible Galaxy es un repositorio en l√≠nea que sirve como una plataforma centralizada para compartir y descubrir contenido de Ansible. Principalmente, alberga "roles" y "colecciones", que son unidades preempaquetadas de c√≥digo Ansible dise√±adas para simplificar la automatizaci√≥n de tareas complejas. Los roles y colecciones permiten a los usuarios reutilizar configuraciones y mejores pr√°cticas, acelerando as√≠ el desarrollo y la implementaci√≥n de automatizaciones.</p>
                <p>En resumen, <a href="https://galaxy.ansible.com/ui/standalone/roles/" target="blank">Ansible Galaxy</a> es el repositorio donde la comunidad comparte roles ya listos para usar. Algunos ejemplos populares:</p>
                <table>
                    <tr>
                        <th>Rol</th>
                        <th>Descripci√≥n</th>
                    </tr>
                    <tr>
                        <td>geerlingguy.mysql</td>
                        <td>Instala y configura MySQL/MariaDB.</td>
                    </tr>
                    <tr>
                        <td>geerlingguy.apache</td>
                        <td>Configura servidores Apache.</td>
                    </tr>
                    <tr>
                        <td>nginxinc.nginx</td>
                        <td>Rol oficial de NGINX para configurar y administrar.</td>
                    </tr>
                    <tr>
                        <td>dev-sec.os-hardening</td>
                        <td>Aplica pol√≠ticas de seguridad al sistema operativo.</td>
                    </tr>
                    <tr>
                        <td>elastic.elasticsearch</td>
                        <td>Implementa un cl√∫ster de Elasticsearch.</td>
                    </tr>
                    <tr>
                        <td>ansible-role-docker</td>
                        <td>Instala y configura Docker Engine.</td>
                    </tr>
                </table>
                <div class="contenedor">
                    <div class="etiqueta">
                        Se instalan as√≠:
                    </div>
                    <div class="comandos">
                        <input type="text" class="text" value="ansible-galaxy install geerlingguy.apache" oninput="ajustarAncho(this)">
                        <button><i class="fa fa-clone"></i><span> Copy</span></button>
                    </div>
                </div>
                <p>Y luego los llamas desde tu playbook.</p>
                <div class="blog-image-zoom">
                    <img src="media/ansible10.png" alt="">
                </div>
                <h6>Nodos Gestionados (Managed Nodes)</h6>
                <p>Son los servidores o dispositivos que Ansible administra. No requieren instalar ning√∫n software adicional: basta con que tengan SSH y Python. Las tareas se ejecutan desde el nodo de control hacia ellos.</p>
                <p>Pueden ser:</p>
                <ul  style="list-style-type: none;">
                    <li>‚óà Servidores Linux</li>
                    <li>‚óà Equipos Windows (usando WinRM)</li>
                    <li>‚óà Equipos de red (switches, routers, firewalls)</li>
                    <li>‚óà Entornos cloud</li>
                </ul>
                <br>
                <p>El flujo de ejecuci√≥n de Ansible comienza con la invocaci√≥n de un ansible-playbook, que act√∫a como el punto de entrada para la automatizaci√≥n. El nodo de control, donde se ejecuta Ansible, procede a leer el inventario, un archivo que define los hosts gestionados y sus agrupaciones, esencial para determinar a qu√© sistemas se aplicar√°n las tareas. A continuaci√≥n, Ansible carga los playbooks, archivos YAML que describen el estado deseado de los sistemas y las tareas a realizar, junto con las variables y roles necesarios para la configuraci√≥n. La conexi√≥n con los nodos gestionados se establece mediante SSH, un protocolo seguro que permite la ejecuci√≥n remota de comandos. Las tareas definidas en los playbooks se ejecutan secuencialmente, utilizando m√≥dulos de Ansible que realizan acciones espec√≠ficas en los sistemas remotos. Una caracter√≠stica clave de Ansible es su idempotencia: los cambios se aplican solo si son necesarios, evitando modificaciones innecesarias y asegurando la consistencia del sistema. Finalmente, Ansible muestra el resultado de la ejecuci√≥n, incluyendo cualquier error que haya ocurrido, proporcionando una visi√≥n clara del estado de la automatizaci√≥n.</p>
                <h2>Comandos b√°sicos</h2>
                <div class="contenedor">
                    <div class="etiqueta">
                        Instala Ansible en el sistema Ubuntu:
                    </div>
                    <div class="comandos">
                        <input type="text" class="text" value="sudo apt install ansible -y" oninput="ajustarAncho(this)">
                        <button><i class="fa fa-clone"></i><span> Copy</span></button>
                    </div>
                </div>
                <div class="contenedor">
                    <div class="etiqueta">
                        Verifica la conectividad SSH a todos los hosts definidos en el inventario:
                    </div>
                    <div class="comandos">
                        <input type="text" class="text" value="ansible all -m ping -i inventario.ini" oninput="ajustarAncho(this)">
                        <button><i class="fa fa-clone"></i><span> Copy</span></button>
                    </div>
                </div>
                <div class="contenedor">
                    <div class="etiqueta">
                        Ejecuta el comando "uptime" en los hosts del grupo "web":
                    </div>
                    <div class="comandos">
                        <input type="text" class="text" value="ansible web -a &quot;uptime&quot; -i inventario.ini" oninput="ajustarAncho(this)">
                        <button><i class="fa fa-clone"></i><span> Copy</span></button>
                    </div>
                </div>
                <div class="contenedor">
                    <div class="etiqueta">
                        Ejecuta el playbook "apache.yml" en los hosts definidos en el inventario:
                    </div>
                    <div class="comandos">
                        <input type="text" class="text" value="ansible-playbook apache.yml -i inventario.ini" oninput="ajustarAncho(this)">
                        <button><i class="fa fa-clone"></i><span> Copy</span></button>
                    </div>
                </div>
                <div class="blog-image-grande">
                    <img src="media/ansible11.png" alt="">
                </div>
                <h2>Configuraci√≥n</h2>
                <p>‚ùè Crear un archivo Dockerfile:</p>
                <div id="terminal">
                    <section id="terminal__bar">
                        <div id="bar__buttons">
                        <button class="bar__button" id="bar__button--exit">&#10005;</button>
                        <button class="bar__button">&#9633;</button>
                        <button class="bar__button">&#9472;</button>
                        </div>
                        <p id="bar__user">ryuzak1@ubuntu: ~</p>
                    </section>
                    <section id="terminal__body">
                        <div id="terminal__prompt">
                        <span id="terminal__prompt--command"><marcador class="user">ryuzak1@ubuntu:</marcador><marcador class="location">~</marcador><marcador class="bling">$&nbsp;</marcador><marcador class="sudo"></marcador><marcador class="tool">nano</marcador> ContainerFile <marcador class="param"></marcador></span>    
                        </div>
                        <div class="command-response-container">
                            <span id="terminal__prompt--response" class="multiline-text">FROM ubuntu:latest

# Instala OpenSSH y Ansible
RUN apt-get update && apt-get install -y openssh-server openssh-client sudo ansible procps nano less net-tools iputils-ping

# Configura el usuario ansible
RUN useradd -ms /bin/bash ansible && echo "ansible:ansible" | chpasswd && echo 'ansible ALL=(ALL) NOPASSWD:ALL' >> /etc/sudoers

# Permite login por contrase√±a
RUN sed -i 's/#PermitRootLogin.*/PermitRootLogin yes/' /etc/ssh/sshd_config && \
    sed -i 's/#PasswordAuthentication.*/PasswordAuthentication yes/' /etc/ssh/sshd_config

EXPOSE 22

CMD ["/usr/sbin/sshd", "-D"]
                            </span>
                        </div>
                    </section>
                </div>
                <p>‚ùè Construye la imagen.</p>
                <div class="contenedor">
                    <div class="etiqueta">
                        Creaci√≥n de una imagen de Fedora con la configuraci√≥n b√°sica:
                    </div>
                    <div class="comandos">
                        <input type="text" class="text" value="podman build -t ansible -f ContainerFile" oninput="ajustarAncho(this)">
                        <button><i class="fa fa-clone"></i><span> Copy</span></button>
                    </div>
                </div>
                <div class="contenedor">
                    <div class="etiqueta">
                        Verificar que la imagen existe:
                    </div>
                    <div class="comandos">
                        <input type="text" class="text" value="podman images" oninput="ajustarAncho(this)">
                        <button><i class="fa fa-clone"></i><span> Copy</span></button>
                    </div>
                </div>
                <div class="contenedor">
                    <div class="etiqueta">
                        Crea una red Docker personalizada (modo bridge):
                    </div>
                    <div class="comandos">
                        <input type="text" class="text" value="podman network create --driver bridge mi_red" oninput="ajustarAncho(this)">
                        <button><i class="fa fa-clone"></i><span> Copy</span></button>
                    </div>
                </div>
                <div class="contenedor">
                    <div class="etiqueta">
                        Verificar la red:
                    </div>
                    <div class="comandos">
                        <input type="text" class="text" value="podman network ls" oninput="ajustarAncho(this)">
                        <button><i class="fa fa-clone"></i><span> Copy</span></button>
                    </div>
                </div>
                <p>‚ùè Crear los contenedores.</p>
                <div class="contenedor">
                    <div class="etiqueta">
                        Lanza 3 contenedores, cada uno con un puerto SSH distinto (nodo1 2221, nodo2 2222 y nodo3 2223):
                    </div>
                    <div class="comandos">
                        <input type="text" class="text" value="podman run -d --name nodo1 --network mi_red --cap-add=ALL -p 2221:22 <image-id> sleep infinity" oninput="ajustarAncho(this)">
                        <button><i class="fa fa-clone"></i><span> Copy</span></button>
                    </div>
                </div>
                <div class="contenedor">
                    <div class="etiqueta">
                        Verificar las IPs:
                    </div>
                    <div class="comandos">
                        <input type="text" class="text" value="podman inspect -f '{{.NetworkSettings.Networks.mi_red.IPAddress}}' nodo1" oninput="ajustarAncho(this)">
                        <button><i class="fa fa-clone"></i><span> Copy</span></button>
                    </div>
                </div>
                <p>Como est√°s usando Podman, todos los contenedores estar√°n en la red podman por defecto y ya tienen NAT a tu host, por lo tanto no necesitas una red personalizada.</p>
                <div id="terminal">
                    <section id="terminal__bar">
                        <div id="bar__buttons">
                        <button class="bar__button" id="bar__button--exit">&#10005;</button>
                        <button class="bar__button">&#9633;</button>
                        <button class="bar__button">&#9472;</button>
                        </div>
                        <p id="bar__user">ryuzak1@ubuntu: ~</p>
                    </section>
                    <section id="terminal__body">
                        <div id="terminal__prompt">
                        <span id="terminal__prompt--command"><marcador class="user">ryuzak1@ubuntu:</marcador><marcador class="location">~</marcador><marcador class="bling">$&nbsp;</marcador><marcador class="sudo"></marcador><marcador class="tool">podman</marcador> ps <marcador class="param"></marcador></span>    
                        </div>
                        <div class="command-response-container">
                            <span id="terminal__prompt--response" class="multiline-text">CONTAINER ID  IMAGE                                     COMMAND         CREATED             STATUS             PORTS                 NAMES
14e57979967e  registry.fedoraproject.org/fedora:latest  sleep infinity  5 minutes ago       Up 5 minutes       0.0.0.0:2221->22/tcp  nodo1
7a8e438784a7  registry.fedoraproject.org/fedora:latest  sleep infinity  About a minute ago  Up About a minute  0.0.0.0:2222->22/tcp  nodo2
161965d9d0a5  registry.fedoraproject.org/fedora:latest  sleep infinity  56 seconds ago      Up 57 seconds      0.0.0.0:2223->22/tcp  nodo3                               
                            </span>
                        </div>
                    </section>
                </div>

                <p>‚ùè Verificar la conexi√≥n en los contenedores.</p>
                <div class="contenedor">
                    <div class="etiqueta">
                        Entrar al contenedor:
                    </div>
                    <div class="comandos">
                        <input type="text" class="text" value="podman exec -it nodo1 bash" oninput="ajustarAncho(this)">
                        <button><i class="fa fa-clone"></i><span> Copy</span></button>
                    </div>
                </div>
                <p>A√±adir al usuario ansible al grupo sudo:</p>
                <div id="terminal">
                    <section id="terminal__bar">
                        <div id="bar__buttons">
                        <button class="bar__button" id="bar__button--exit">&#10005;</button>
                        <button class="bar__button">&#9633;</button>
                        <button class="bar__button">&#9472;</button>
                        </div>
                        <p id="bar__user">ryuzak1@ubuntu: ~</p>
                    </section>
                    <section id="terminal__body">
                        <div id="terminal__prompt">
                        <span id="terminal__prompt--command"><marcador class="user">ryuzak1@ubuntu:</marcador><marcador class="location">~</marcador><marcador class="bling">$&nbsp;</marcador><marcador class="sudo"></marcador><marcador class="tool">visudo</marcador> <marcador class="param"></marcador></span>    
                        </div>
                        <div class="command-response-container">
                            <span id="terminal__prompt--response" class="multiline-text">## The COMMANDS section may have other options added to it.
##
## Allow root to run any commands anywhere
root        ALL=(ALL)       ALL
ansible     ALL=(ALL)       ALL                                                            
                            </span>
                        </div>
                    </section>
                </div>
                <p>La configuraci√≥n que aplicada al usuario "ansible" le otorga privilegios de superusuario a trav√©s de sudo, lo que significa que puede ejecutar cualquier comando en el sistema sin restricciones, similar a lo que har√≠a el usuario "root". Esto es crucial en entornos de automatizaci√≥n como Ansible, donde se requiere acceso completo al sistema para realizar tareas de configuraci√≥n y administraci√≥n. Sin embargo, esta configuraci√≥n tambi√©n conlleva riesgos de seguridad significativos si no se implementa y controla adecuadamente, ya que cualquier error o acceso no autorizado podr√≠a comprometer la integridad del sistema.</p>
                <div class="contenedor">
                    <div class="etiqueta">
                        Arrancar el servicio sshd:
                    </div>
                    <div class="comandos">
                        <input type="text" class="text" value="service ssh start" oninput="ajustarAncho(this)">
                        <button><i class="fa fa-clone"></i><span> Copy</span></button>
                    </div>
                </div>
                <p>Es importante recordar que el servicio SSH (sshd) debe estar en ejecuci√≥n dentro de cada contenedor para permitir conexiones remotas. Por lo tanto, se debe asegurar que el servicio SSH se inicie correctamente en todos los contenedores que requieran acceso remoto a trav√©s de SSH.</p>
                <div class="contenedor">
                    <div class="etiqueta">
                        Cambiar la contrase√±a del usuario root:
                    </div>
                    <div class="comandos">
                        <input type="text" class="text" value="passwd" oninput="ajustarAncho(this)">
                        <button><i class="fa fa-clone"></i><span> Copy</span></button>
                    </div>
                </div>
                <p>En la configuraci√≥n proporcionada, tanto el usuario "root" como el usuario "ansible" poseen privilegios y contrase√±as equivalentes para operar el servicio de Ansible. Esto se debe a que se ha configurado al usuario "ansible" con la capacidad de ejecutar cualquier comando mediante sudo sin necesidad de contrase√±a, y se ha establecido la misma contrase√±a ("ansible") para ambos usuarios. Por lo tanto, cualquier operaci√≥n o tarea que pueda realizarse con el usuario "root" tambi√©n puede llevarse a cabo con el usuario "ansible", lo que facilita la automatizaci√≥n y administraci√≥n del sistema a trav√©s de Ansible.</p>
                <div class="contenedor">
                    <div class="etiqueta">
                        Conectarse por SSH:
                    </div>
                    <div class="comandos">
                        <input type="text" class="text" value="ssh ansible@localhost -p 2221" oninput="ajustarAncho(this)">
                        <button><i class="fa fa-clone"></i><span> Copy</span></button>
                    </div>
                </div>
                <p>‚ùè Preparar la conexi√≥n entre nodos.</p>
                <p><marcador class="subrayado">ansible-doc</marcador> es una herramienta de Ansible que se utiliza para mostrar la documentaci√≥n de m√≥dulos, plugins y otros componentes de Ansible.</p>
                <div id="terminal">
                    <section id="terminal__bar">
                        <div id="bar__buttons">
                        <button class="bar__button" id="bar__button--exit">&#10005;</button>
                        <button class="bar__button">&#9633;</button>
                        <button class="bar__button">&#9472;</button>
                        </div>
                        <p id="bar__user">ryuzak1@ubuntu: ~</p>
                    </section>
                    <section id="terminal__body">
                        <div id="terminal__prompt">
                        <span id="terminal__prompt--command"><marcador class="user">ryuzak1@ubuntu:</marcador><marcador class="location">~</marcador><marcador class="bling">$&nbsp;</marcador><marcador class="sudo"></marcador><marcador class="tool">ansible-doc</marcador> <marcador class="param">-l</marcador></span>    
                        <span id="terminal__prompt--cursor"></span>
                        </div>
                        <div class="command-response-container">
                            <span id="terminal__prompt--response" class="multiline-text">amazon.aws.autoscaling_group
amazon.aws.autoscaling_group_info
amazon.aws.aws_az_info
amazon.aws.aws_caller_info
amazon.aws.aws_region_info
amazon.aws.backup_plan  
amazon.aws.backup_plan_info       
amazon.aws.backup_restore_job_info
amazon.aws.backup_selection  
amazon.aws.backup_selection_info
amazon.aws.backup_tag
amazon.aws.backup_tag_info
amazon.aws.backup_vault
amazon.aws.backup_vault_info
amazon.aws.cloudformation
amazon.aws.cloudformation_info
amazon.aws.cloudtrail
amazon.aws.cloudtrail_info
amazon.aws.cloudwatch_metric_alarm
amazon.aws.cloudwatch_metric_alarm_info
amazon.aws.cloudwatchevent_rule
amazon.aws.cloudwatchlogs_log_group
amazon.aws.cloudwatchlogs_log_group_info
. . . [ snip ] . . .
                            </span>
                        </div>
                    </section>
                </div>
                <div class="contenedor">
                    <div class="etiqueta">
                        Generar claves SSH:
                    </div>
                    <div class="comandos">
                        <input type="text" class="text" value="ssh-keygen" oninput="ajustarAncho(this)">
                        <button><i class="fa fa-clone"></i><span> Copy</span></button>
                    </div>
                </div>
                <div class="contenedor">
                    <div class="etiqueta">
                        Copiar clave SSH p√∫blica al servidor remoto:
                    </div>
                    <div class="comandos">
                        <input type="text" class="text" value="ssh-copy-id ansible@10.89.0.14" oninput="ajustarAncho(this)">
                        <button><i class="fa fa-clone"></i><span> Copy</span></button>
                    </div>
                </div>
                <p>Para poder enviar la clave SSH a los otros nodos (nodo2 y nodo3) y permitir la autenticaci√≥n sin contrase√±a, es fundamental que la contrase√±a del usuario "root" haya sido modificada en todos los contenedores. Esto se debe a que <marcador class="subrayado">ssh-copy-id</marcador> requiere autenticarse inicialmente con la contrase√±a para copiar la clave p√∫blica SSH al archivo <marcador class="resaltado1">authorized_keys</marcador> de los nodos remotos (nodo2: &lt;ip_nodo2>, nodo3: &lt;ip_nodo3>). Una vez que la clave p√∫blica se ha copiado correctamente, se podr√°n establecer conexiones SSH sin necesidad de ingresar la contrase√±a.</p>
                <p>‚ùè Editar el archivo que asigna nombres de host a direcciones IP (<marcador class="subrayado">nano /etc/hosts</marcador>) en el nodo de control (nodo1):</p>
                <div class="archivo">
192.168.1.68    host.containers.internal host.docker.internal
10.89.0.13      e27ceca2da38 nodo1
10.89.0.14      7d96d7e0d90b nodo2
10.89.0.15      6132a20cf403 nodo3                    
                </div>
                <p>‚ùè Verificar la conexi√≥n:</p>
                <div id="terminal">
                    <section id="terminal__bar">
                        <div id="bar__buttons">
                        <button class="bar__button" id="bar__button--exit">&#10005;</button>
                        <button class="bar__button">&#9633;</button>
                        <button class="bar__button">&#9472;</button>
                        </div>
                        <p id="bar__user">ryuzak1@ubuntu: ~</p>
                    </section>
                    <section id="terminal__body">
                        <div id="terminal__prompt">
                        <span id="terminal__prompt--command"><marcador class="user">ryuzak1@ubuntu:</marcador><marcador class="location">~</marcador><marcador class="bling">$&nbsp;</marcador><marcador class="sudo"></marcador><marcador class="tool">ping</marcador> nodo2<marcador class="param"></marcador></span>    
                        </div>
                        <div class="command-response-container">
                            <span id="terminal__prompt--response" class="multiline-text">PING 7d96d7e0d90b (10.89.0.14) 56(84) bytes of data.
64 bytes from 7d96d7e0d90b (10.89.0.14): icmp_seq=1 ttl=64 time=0.037 ms
64 bytes from 7d96d7e0d90b (10.89.0.14): icmp_seq=2 ttl=64 time=0.042 ms
64 bytes from 7d96d7e0d90b (10.89.0.14): icmp_seq=3 ttl=64 time=0.044 ms
64 bytes from 7d96d7e0d90b (10.89.0.14): icmp_seq=4 ttl=64 time=0.046 ms
64 bytes from 7d96d7e0d90b (10.89.0.14): icmp_seq=5 ttl=64 time=0.044 ms
64 bytes from 7d96d7e0d90b (10.89.0.14): icmp_seq=6 ttl=64 time=0.045 ms
^C
--- 7d96d7e0d90b ping statistics ---
6 packets transmitted, 6 received, 0% packet loss, time 5111ms
rtt min/avg/max/mdev = 0.037/0.043/0.046/0.003 ms                                
                            </span>
                        </div>
                    </section>
                </div>
                <p>‚ùè Crear el archivo que contiene los hosts a gestionar (<marcador class="subrayado">nano maquinas</marcador>):</p>
                <div class="archivo">
nodo2
nodo3
                </div>
                <p>‚ùè Verificar la conexi√≥n:</p>
<div id="terminal">
    <section id="terminal__bar">
        <div id="bar__buttons">
        <button class="bar__button" id="bar__button--exit">&#10005;</button>
        <button class="bar__button">&#9633;</button>
        <button class="bar__button">&#9472;</button>
        </div>
        <p id="bar__user">ryuzak1@ubuntu: ~</p>
    </section>
    <section id="terminal__body">
        <div id="terminal__prompt">
        <span id="terminal__prompt--command"><marcador class="user">ryuzak1@ubuntu:</marcador><marcador class="location">~</marcador><marcador class="bling">$&nbsp;</marcador><marcador class="sudo"></marcador><marcador class="tool">ansible</marcador> -i maquinas all -m ping<marcador class="param"></marcador></span>    
        </div>
        <div class="command-response-container">
            <span id="terminal__prompt--response" class="multiline-text">nodo3 | SUCCESS => {
    "ansible_facts": {
        "discovered_interpreter_python": "/usr/bin/python3"
    },
    "changed": false,
    "ping": "pong"
}
nodo2 | SUCCESS => {
    "ansible_facts": {
        "discovered_interpreter_python": "/usr/bin/python3"
    },
    "changed": false,
    "ping": "pong"
}            
                            </span>
                        </div>
                    </section>
                </div>
                <p>Para confirmar la autenticidad de cada host y asegurar una conexi√≥n segura, se recomienda realizar un ping individual a cada nodo (<marcador class="subrayado">ansible -i maquinas nodo2 -m ping</marcador>). Esto ayuda a verificar que te est√°s conectando al host correcto.</p>
                <p>‚ùè Usar shell commands para crear un archivo en el nodo3:</p>
                <div id="terminal">
                    <section id="terminal__bar">
                        <div id="bar__buttons">
                        <button class="bar__button" id="bar__button--exit">&#10005;</button>
                        <button class="bar__button">&#9633;</button>
                        <button class="bar__button">&#9472;</button>
                        </div>
                        <p id="bar__user">ryuzak1@ubuntu: ~</p>
                    </section>
                    <section id="terminal__body">
                        <div id="terminal__prompt">
                        <span id="terminal__prompt--command"><marcador class="user">ryuzak1@ubuntu:</marcador><marcador class="location">~</marcador><marcador class="bling">$&nbsp;</marcador><marcador class="sudo"></marcador><marcador class="tool">ansible</marcador> <marcador class="param">-i</marcador> maquinas nodo3 <marcador class="param">-m</marcador> command <marcador class="param">-a</marcador> "touch /home/ansible/test.txt"<marcador class="param"></marcador></span>    
                        </div>
                        <div class="command-response-container">
                            <span id="terminal__prompt--response" class="multiline-text">nodo3 | CHANGED | rc=0 >>
                                            </span>
                        </div>
                    </section>
                </div>
                <p>‚ùè Usar shell commands para listar enlaces simb√≥licos en el nodo3:</p>
                <div id="terminal">
                    <section id="terminal__bar">
                        <div id="bar__buttons">
                        <button class="bar__button" id="bar__button--exit">&#10005;</button>
                        <button class="bar__button">&#9633;</button>
                        <button class="bar__button">&#9472;</button>
                        </div>
                        <p id="bar__user">ryuzak1@ubuntu: ~</p>
                    </section>
                    <section id="terminal__body">
                        <div id="terminal__prompt">
                        <span id="terminal__prompt--command"><marcador class="user">ryuzak1@ubuntu:</marcador><marcador class="location">~</marcador><marcador class="bling">$&nbsp;</marcador><marcador class="sudo"></marcador><marcador class="tool">ansible</marcador> <marcador class="param">-i</marcador> maquinas nodo3 <marcador class="param">-m</marcador> shell <marcador class="param">-a</marcador> "ls -la / | grep lrwxrwxrwx"<marcador class="param"></marcador></span>    
                        </div>
                        <div class="command-response-container">
                            <span id="terminal__prompt--response" class="multiline-text">nodo3 | CHANGED | rc=0 >>
lrwxrwxrwx   1 root   root       7 Apr 22  2024 bin -> usr/bin
lrwxrwxrwx   1 root   root       7 Apr 22  2024 lib -> usr/lib
lrwxrwxrwx   1 root   root       9 Apr 22  2024 lib64 -> usr/lib64
lrwxrwxrwx   1 root   root       8 Apr 22  2024 sbin -> usr/sbin                                
                            </span>
                        </div>
                    </section>
                </div>
                <p>El modulo <marcador class="subrayado">-m command</marcador> se cambio a <marcador class="subrayado">-m shell</marcador> para que el comando pueda usar pipes y redireccionadores.</p>
                <div class="contenedor">
                    <div class="etiqueta">
                        Crear un archivo de prueba:
                    </div>
                    <div class="comandos">
                        <input type="text" class="text" value="touch test.txt" oninput="ajustarAncho(this)">
                        <button><i class="fa fa-clone"></i><span> Copy</span></button>
                    </div>
                </div>
                <p>‚ùè Copiar un archivo a todos los nodos:</p>
                <div id="terminal">
                    <section id="terminal__bar">
                        <div id="bar__buttons">
                        <button class="bar__button" id="bar__button--exit">&#10005;</button>
                        <button class="bar__button">&#9633;</button>
                        <button class="bar__button">&#9472;</button>
                        </div>
                        <p id="bar__user">ryuzak1@ubuntu: ~</p>
                    </section>
                    <section id="terminal__body">
                        <div id="terminal__prompt">
                        <span id="terminal__prompt--command"><marcador class="user">ryuzak1@ubuntu:</marcador><marcador class="location">~</marcador><marcador class="bling">$&nbsp;</marcador><marcador class="sudo"></marcador><marcador class="tool">ansible</marcador> <marcador class="param">-i</marcador> maquinas nodo* <marcador class="param">-m</marcador> copy <marcador class="param">-a</marcador> "src=test.txt dest=/home/ansible"<marcador class="param"></marcador></span>    
                        </div>
                        <div class="command-response-container">
                            <span id="terminal__prompt--response" class="multiline-text">nodo3 | CHANGED => {
    "ansible_facts": {
        "discovered_interpreter_python": "/usr/bin/python3"
    },
    "changed": true,
    "checksum": "da39a3ee5e6b4b0d3255bfef95601890afd80709",
    "dest": "/home/ansible/test2.txt",
    "gid": 0,
    "group": "root",
    "md5sum": "d41d8cd98f00b204e9800998ecf8427e",
    "mode": "0644",
    "owner": "root",
    "size": 0,
    "src": "/root/.ansible/tmp/ansible-tmp-1743974511.523381-438-188031703668177/source",
    "state": "file",
    "uid": 0
}
nodo2 | CHANGED => {
    "ansible_facts": {
        "discovered_interpreter_python": "/usr/bin/python3"
    },
    "changed": true,
    "checksum": "da39a3ee5e6b4b0d3255bfef95601890afd80709",
    "dest": "/home/ansible/test2.txt",
    "gid": 0,
    "group": "root",
    "md5sum": "d41d8cd98f00b204e9800998ecf8427e",
    "mode": "0644",
    "owner": "root",
    "size": 0,
    "src": "/root/.ansible/tmp/ansible-tmp-1743974511.5220792-437-209822629953954/source",
    "state": "file",
    "uid": 0
}
                                            </span>
                        </div>
                    </section>
                </div>
                <p>‚ùè Instalar o actualizar curl en el nodo2:</p>
                <div id="terminal">
                    <section id="terminal__bar">
                        <div id="bar__buttons">
                        <button class="bar__button" id="bar__button--exit">&#10005;</button>
                        <button class="bar__button">&#9633;</button>
                        <button class="bar__button">&#9472;</button>
                        </div>
                        <p id="bar__user">ryuzak1@ubuntu: ~</p>
                    </section>
                    <section id="terminal__body">
                        <div id="terminal__prompt">
                        <span id="terminal__prompt--command"><marcador class="user">ryuzak1@ubuntu:</marcador><marcador class="location">~</marcador><marcador class="bling">$&nbsp;</marcador><marcador class="sudo"></marcador><marcador class="tool">ansible</marcador> <marcador class="param">-i</marcador> maquinas nodo2 <marcador class="param">-m</marcador> apt <marcador class="param">-a</marcador> "name=curl state=latest"<marcador class="param"></marcador></span>    
                        </div>
                        <div class="command-response-container">
                            <span id="terminal__prompt--response" class="multiline-text">nodo2 | CHANGED => {
"ansible_facts": {
    "discovered_interpreter_python": "/usr/bin/python3"
},
"cache_update_time": 1743974872,
"cache_updated": false,
"changed": true,
"stderr": "debconf: delaying package configuration, since apt-utils is not installed\n",
"stderr_lines": [
    "debconf: delaying package configuration, since apt-utils is not installed"
],
. . . [ snip ] . . .
                            
                                            </span>
                        </div>
                    </section>
                </div>
                <p>Cuando se utilizan los par√°metros <marcador class="subrayado">-b</marcador> y <marcador class="subrayado">-K</marcador> en un comando Ansible, se indica que se desea ejecutar el comando con privilegios elevados (como <marcador class="subrayado">sudo</marcador>) y se solicita la contrase√±a de elevaci√≥n de privilegios. Esto es necesario cuando el usuario "ansible" no tiene permisos suficientes para realizar ciertas tareas, como instalar paquetes o modificar archivos de configuraci√≥n del sistema. Al usar <marcador class="subrayado">-b</marcador>, Ansible intentar√° ejecutar el comando con <marcador class="subrayado">sudo</marcador> o un m√©todo similar para obtener privilegios de superusuario. El par√°metro <marcador class="subrayado">-K</marcador> le indica a Ansible que solicite la contrase√±a necesaria para la elevaci√≥n de privilegios.</p>
                <p>‚ùè Instalar o actualizar Apache2 en el nodo2 con privilegios elevados:</p>
                <div id="terminal">
                    <section id="terminal__bar">
                        <div id="bar__buttons">
                        <button class="bar__button" id="bar__button--exit">&#10005;</button>
                        <button class="bar__button">&#9633;</button>
                        <button class="bar__button">&#9472;</button>
                        </div>
                        <p id="bar__user">ryuzak1@ubuntu: ~</p>
                    </section>
                    <section id="terminal__body">
                        <div id="terminal__prompt">
                        <span id="terminal__prompt--command"><marcador class="user">ryuzak1@ubuntu:</marcador><marcador class="location">~</marcador><marcador class="bling">$&nbsp;</marcador><marcador class="sudo"></marcador><marcador class="tool">ansible</marcador> <marcador class="param">-i</marcador> maquinas nodo2 <marcador class="param">-b</marcador> <marcador class="param">-K</marcador> <marcador class="param">-m</marcador> apt <marcador class="param">-a</marcador> "name=apache2 state=latest"<marcador class="param"></marcador></span>    
                        </div>
                        <div class="command-response-container">
                            <span id="terminal__prompt--response" class="multiline-text">BECOME password: 
nodo2 | CHANGED => {
    "ansible_facts": {
        "discovered_interpreter_python": "/usr/bin/python3"
    },
    "cache_update_time": 1743974872,
    "cache_updated": false,
    "changed": true,
    "stderr": "debconf: delaying package configuration, since apt-utils is not installed\n",
    "stderr_lines": [
        "debconf: delaying package configuration, since apt-utils is not installed"
    ],
. . . [ snip ] . . .
                                            </span>
                        </div>
                    </section>
                </div>
                <p>‚ùè Iniciar y habilitar Apache2 en el nodo2 con privilegios elevados:</p>
                <div id="terminal">
                    <section id="terminal__bar">
                        <div id="bar__buttons">
                        <button class="bar__button" id="bar__button--exit">&#10005;</button>
                        <button class="bar__button">&#9633;</button>
                        <button class="bar__button">&#9472;</button>
                        </div>
                        <p id="bar__user">ryuzak1@ubuntu: ~</p>
                    </section>
                    <section id="terminal__body">
                        <div id="terminal__prompt">
                        <span id="terminal__prompt--command"><marcador class="user">ryuzak1@ubuntu:</marcador><marcador class="location">~</marcador><marcador class="bling">$&nbsp;</marcador><marcador class="sudo"></marcador><marcador class="tool">ansible</marcador> <marcador class="param">-i</marcador> maquinas nodo2 <marcador class="param">-b</marcador> <marcador class="param">-K</marcador> <marcador class="param">-m</marcador> service <marcador class="param">-a</marcador> "name=apache2 state=started enabled=yes"<marcador class="param"></marcador></span>    
                        </div>
                        <div class="command-response-container">
                            <span id="terminal__prompt--response" class="multiline-text">BECOME password: 
nodo2 | CHANGED => {
    "ansible_facts": {
        "discovered_interpreter_python": "/usr/bin/python3"
    },
    "changed": true,
    "enabled": true,
    "name": "apache2",
    "state": "started"
}                               
                                            </span>
                        </div>
                    </section>
                </div>
                <div class="contenedor">
                    <div class="etiqueta">
                        Verificar el estado de Apache2 en el nodo2:
                    </div>
                    <div class="comandos">
                        <input type="text" class="text" value="service apache2 status" oninput="ajustarAncho(this)">
                        <button><i class="fa fa-clone"></i><span> Copy</span></button>
                    </div>
                </div>
                <div class="contenedor">
                    <div class="etiqueta">
                        Crear un archivo de configuraci√≥n de Ansible deshabilitado por defecto:
                    </div>
                    <div class="comandos">
                        <input type="text" class="text" value="ansible-config init --disabled > ansible.cfg" oninput="ajustarAncho(this)">
                        <button><i class="fa fa-clone"></i><span> Copy</span></button>
                    </div>
                </div>
                <p>Al generar este archivo con todas las opciones inicialmente deshabilitadas, se ofrece un lienzo en blanco para configurar Ansible de acuerdo con las necesidades espec√≠ficas del proyecto. Esto facilita la activaci√≥n selectiva de las opciones requeridas, optimizando as√≠ el comportamiento de Ansible para cada caso de uso particular.</p>
                <p>El archivo <marcador class="resaltado1">ansible.cfg</marcador> act√∫a como el centro de control para ajustar el comportamiento de Ansible. A trav√©s de este archivo, se pueden definir par√°metros cruciales como la ubicaci√≥n de los inventarios, los ajustes de conexi√≥n y las opciones de los m√≥dulos. La flexibilidad que ofrece este archivo permite adaptar Ansible a una amplia gama de entornos y flujos de trabajo. Para editar el archivo <marcador class="resaltado1">ansible.cfg</marcador> y personalizar su contenido, se pueden utilizar editores de texto como <marcador class="subrayado">nano</marcador> o <marcador class="subrayado">vi</marcador>, herramientas que brindan la capacidad de modificar las opciones de configuraci√≥n de manera precisa y eficiente.</p>
                <p>Cuando Ansible busca archivos de configuraci√≥n, sigue un orden de prioridad espec√≠fico para determinar qu√© archivo utilizar. Este orden de prioridad es el siguiente:</p>
                <ul style="list-style-type: none;">
                    <li>‚àò <marcador class="resaltado8">ANSIBLE_CONFIG (variable de entorno): </marcador>Si se define la variable de entorno <marcador class="subrayado">ANSIBLE_CONFIG</marcador>, Ansible utilizar√° el archivo especificado en esta variable.</li>
                    <li>‚àò <marcador class="resaltado8">ansible.cfg (directorio de trabajo actual): </marcador>Si no se define la variable de entorno, Ansible buscar√° un archivo <marcador class="resaltado1">ansible.cfg</marcador> en el directorio de trabajo actual.</li>
                    <li>‚àò <marcador class="resaltado8">~/.ansible.cfg (directorio de inicio del usuario): </marcador>Si no se encuentra en el directorio de trabajo actual, Ansible buscar√° un archivo <marcador class="resaltado1">ansible.cfg</marcador> en el directorio de inicio del usuario.</li>
                    <li>‚àò <marcador class="resaltado8">/etc/ansible/ansible.cfg (directorio de configuraci√≥n del sistema): </marcador>Si no se encuentra en el directorio de inicio del usuario, Ansible buscar√° un archivo <marcador class="resaltado1">ansible.cfg</marcador> en el directorio de configuraci√≥n del sistema.</li>
                </ul>
                <p>Este orden de prioridad permite una gran flexibilidad en la configuraci√≥n de Ansible, permitiendo configuraciones a nivel de proyecto, usuario o sistema.</p>
                <h6>Ansible Playbooks</h6>
                <p>‚ùè Crear el archivo de inventario (<marcador class="subrayado">nano inventario</marcador>):</p>
                <div class="archivo">
[servidores_web]
nodo2 ansible_user=ansible

[bases_de_datos]
nodo3 ansible_user=ansible    
                </div>
                <div class="contenedor">
                    <div class="etiqueta">
                        Verificar la conectividad:
                    </div>
                    <div class="comandos">
                        <input type="text" class="text" value="ansible -i inventario servidores_web -m ping" oninput="ajustarAncho(this)">
                        <button><i class="fa fa-clone"></i><span> Copy</span></button>
                    </div>
                </div>
                <p>‚ùè Playbook para instalar Apache en servidores_web (<marcador class="subrayado">nano nginx.yml</marcador>):</p>
                <div class="archivo">
---
- name: Instalar y configurar NGINX en servidores web
  hosts: servidores_web
  become: yes

  tasks:
  - name: Instalar NGINX
    apt:
      name: nginx
      state: present
      update_cache: yes

  - name: Asegurar que NGINX est√© iniciado y habilitado
    service:
      name: nginx
      state: started
      enabled: yes
                </div>
                <p>En YAML, la indentaci√≥n es crucial para definir la estructura del archivo. En tu playbook, cada l√≠nea debe estar indentada correctamente. </p>
                <p>‚ùè Ejecutar un playbook de Ansible para configurar Nginx:</p>
                <div id="terminal">
                    <section id="terminal__bar">
                        <div id="bar__buttons">
                        <button class="bar__button" id="bar__button--exit">&#10005;</button>
                        <button class="bar__button">&#9633;</button>
                        <button class="bar__button">&#9472;</button>
                        </div>
                        <p id="bar__user">ryuzak1@ubuntu: ~</p>
                    </section>
                    <section id="terminal__body">
                        <div id="terminal__prompt">
                        <span id="terminal__prompt--command"><marcador class="user">ryuzak1@ubuntu:</marcador><marcador class="location">~</marcador><marcador class="bling">$&nbsp;</marcador><marcador class="sudo"></marcador><marcador class="tool">ansible-playbook</marcador> <marcador class="param">-i</marcador> inventario nginx.yml <marcador class="param">-K</marcador><marcador class="param"></marcador></span>    
                        </div>
                        <div class="command-response-container">
                            <span id="terminal__prompt--response" class="multiline-text">BECOME password: 

PLAY [Instalar y configurar NGINX en servidores web] ***********************************

TASK [Gathering Facts] *****************************************************************
ok: [nodo2]

TASK [Instalar NGINX] ******************************************************************
changed: [nodo2]

TASK [Asegurar que NGINX est√© iniciado y habilitado] ***********************************
fatal: [nodo2]: FAILED! => {"changed": false, "msg": " * Starting nginx nginx\n   ...fail!\n"}

PLAY RECAP *****************************************************************************
nodo2                      : ok=2    changed=1    unreachable=0    failed=1    skipped=0    rescued=0    ignored=0    
                                            </span>
                        </div>
                    </section>
                </div>
                <p>‚ùè Playbook para instalar MySQL en bases_de_datos (<marcador class="subrayado">nano mysql.yml</marcador>):</p>
                <div class="archivo">
---
- name: Instalar MySQL en bases de datos
  hosts: bases_de_datos
  become: yes
  vars:
    db_user: ansible
    db_pass: ansible
    db_name: testdb

  tasks:
    - name: Instalar apt-utils
      apt:
        name: apt-utils
        state: present

    - name: Instalar MySQL y dependencias
      package:
        name: "{{item}}"
        state: present
        update_cache: yes
      loop:
        - mysql-server
        - mysql-client
        - python3-mysqldb
        - libmysqlclient-dev

    - name: Iniciar y habilitar el servicio MySQL
      service:
        name: mysql
        state: started
        enabled: yes

    - name: Crear usuario de MySQL
      mysql_user:
        name: "{{db_user}}"
        password: "{{db_pass}}"
        priv: '*.*:ALL'
        host: '%'
        state: present

    - name: Crear base de datos
      mysql_db:
        name: "{{db_name}}"
        state: present

    - name: Permitir conexiones remotas a MySQL
      lineinfile:
        path: /etc/mysql/mysql.conf.d/mysqld.cnf # Ajusta la ruta si es necesario
        regexp: '^bind-address'
        line: 'bind-address = 0.0.0.0'
        backup: yes
      notify:
        - Reiniciar MySQL

  handlers:
    - name: Reiniciar MySQL
      service:
        name: mysql
        state: restarted
                </div>
                <p>‚ùè Ejecutar un playbook de Ansible para configurar MySQL:</p>
                <div id="terminal">
                    <section id="terminal__bar">
                        <div id="bar__buttons">
                        <button class="bar__button" id="bar__button--exit">&#10005;</button>
                        <button class="bar__button">&#9633;</button>
                        <button class="bar__button">&#9472;</button>
                        </div>
                        <p id="bar__user">ryuzak1@ubuntu: ~</p>
                    </section>
                    <section id="terminal__body">
                        <div id="terminal__prompt">
                        <span id="terminal__prompt--command"><marcador class="user">ryuzak1@ubuntu:</marcador><marcador class="location">~</marcador><marcador class="bling">$&nbsp;</marcador><marcador class="sudo"></marcador><marcador class="tool">ansible-playbook</marcador> <marcador class="param">-i</marcador> inventario mysql.yml <marcador class="param">-K</marcador><marcador class="param"></marcador></span>    
                        </div>
                        <div class="command-response-container">
                            <span id="terminal__prompt--response" class="multiline-text">BECOME password: 
   
PLAY [Instalar MySQL en bases de datos] ************************************************

TASK [Gathering Facts] *****************************************************************
ok: [nodo3]

TASK [Instalar apt-utils] **************************************************************
ok: [nodo3]
. . . [ snip ] . . .
                                            </span>
                        </div>
                    </section>
                </div>
                <p>El paquete mysql-server-8.0 est√° parcialmente instalado y fallando en la post-instalaci√≥n. Esto es com√∫n en contenedores, especialmente porque muchos scripts postinstalaci√≥n intentan iniciar servicios... y los contenedores no suelen tener un sistema de init o systemd completo.</p>
                <!--
                <p>Pod√©s enga√±ar al sistema para que nunca intente arrancar servicios dentro del contenedor creando un policy-rc.d que lo impida.</p>
                <div class="contenedor">
                    <div class="etiqueta">
                        Hacelo antes de instalar mysql-server:
                    </div>
                    <div class="comandos">
                        <input type="text" class="text" value="echo '#!/bin/sh\nexit 101' | sudo tee /usr/sbin/policy-rc.d" oninput="ajustarAncho(this)">
                        <button><i class="fa fa-clone"></i><span> Copy</span></button>
                    </div>
                </div>
                <div class="contenedor">
                    <div class="etiqueta">
                        Dar permisos de ejecuci√≥n:
                    </div>
                    <div class="comandos">
                        <input type="text" class="text" value="sudo chmod +x /usr/sbin/policy-rc.d" oninput="ajustarAncho(this)">
                        <button><i class="fa fa-clone"></i><span> Copy</span></button>
                    </div>
                </div>
                -->
                <p>‚ùè Borrar los recursos de Docker.</p>
                <div class="contenedor">
                    <div class="etiqueta">
                        Detener los contenedores:
                    </div>
                    <div class="comandos">
                        <input type="text" class="text" value="podman stop nodo1 nodo2 nodo3" oninput="ajustarAncho(this)">
                        <button><i class="fa fa-clone"></i><span> Copy</span></button>
                    </div>
                </div>
                <div class="contenedor">
                    <div class="etiqueta">
                        Eliminar los contenedores:
                    </div>
                    <div class="comandos">
                        <input type="text" class="text" value="podman rm nodo1 nodo2 nodo3" oninput="ajustarAncho(this)">
                        <button><i class="fa fa-clone"></i><span> Copy</span></button>
                    </div>
                </div>
                <div class="contenedor">
                    <div class="etiqueta">
                        Eliminar la red con Docker:
                    </div>
                    <div class="comandos">
                        <input type="text" class="text" value="podman network rm mi_red" oninput="ajustarAncho(this)">
                        <button><i class="fa fa-clone"></i><span> Copy</span></button>
                    </div>
                </div>
                <div class="contenedor">
                    <div class="etiqueta">
                        Eliminar la imagen fedora-ansible:
                    </div>
                    <div class="comandos">
                        <input type="text" class="text" value="podman rmi <image-id>" oninput="ajustarAncho(this)">
                        <button><i class="fa fa-clone"></i><span> Copy</span></button>
                    </div>
                </div>
                <p></p>
            </div>
        </div>       
    </main>
    <script src="../js/script.js"></script>
</body>
</html>